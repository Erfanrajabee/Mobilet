/*! For license information please see 9265.89064a7019c53c9efb43.js.LICENSE.txt */
(self.webpackChunkmobillet_pwa=self.webpackChunkmobillet_pwa||[]).push([[9265],{"1d79085d09e474f6642d":(e,t,i)=>{var n;function r(e){this.rand=e}if(e.exports=function(e){return n||(n=new r(null)),n.generate(e)},e.exports.Rand=r,r.prototype.generate=function(e){return this._rand(e)},r.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),i=0;i<t.length;i++)t[i]=this.rand.getByte();return t},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?r.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?r.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:"object"==typeof window&&(r.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var a=i("596565a4fd339d9608a8");if("function"!=typeof a.randomBytes)throw new Error("Not supported");r.prototype._rand=function(e){return a.randomBytes(e)}}catch(e){}},b912ecc4473ae8a2ff0b:(e,t)=>{var i;!function(){"use strict";var n={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var i=arguments[t];if(i){var a=typeof i;if("string"===a||"number"===a)e.push(i);else if(Array.isArray(i)){if(i.length){var o=r.apply(null,i);o&&e.push(o)}}else if("object"===a){if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]")){e.push(i.toString());continue}for(var s in i)n.call(i,s)&&i[s]&&e.push(s)}}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(i=function(){return r}.apply(t,[]))||(e.exports=i)}()},"0f29a1925f6bdf1729f9":(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};n.get||n.set?Object.defineProperty(t,i,n):t[i]=e[i]}return t.default=e,t}(i("8af190b70a6bc55c6f1b")),r=d(i("777de14c6d9da9d6bb40")),a=i("9530a9f355e4ab0927d5"),o=i("999b8422c18ed8d20c8d"),s=i("771ac8d3f39d68e91f97"),c=d(i("c780dee00d7495ff9921"));function d(e){return e&&e.__esModule?e:{default:e}}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},u.apply(this,arguments)}function f(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}var _=function(e){var t=(0,c.default)(e).getLocation,i=function(e){function i(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n=p(this,g(i).call(this,e));var r=e.store,a=e.history,o=e.onLocationChanged;n.inTimeTravelling=!1,n.unsubscribe=r.subscribe((function(){var e=t(r.getState()),i=e.pathname,o=e.search,s=e.hash,c=a.location,d=c.pathname,l=c.search,u=c.hash;d===i&&l===o&&u===s||(n.inTimeTravelling=!0,a.push({pathname:i,search:o,hash:s}))}));var s=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n.inTimeTravelling?n.inTimeTravelling=!1:o(e,t,i)};return n.unlisten=a.listen(s),s(a.location,a.action,!0),n}var r,a,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(i,e),r=i,(a=[{key:"componentWillUnmount",value:function(){this.unlisten(),this.unsubscribe()}},{key:"render",value:function(){var e=this.props,t=e.history,i=e.children;return n.default.createElement(o.Router,{history:t},i)}}])&&f(r.prototype,a),s&&f(r,s),i}(n.PureComponent);i.propTypes={store:r.default.shape({getState:r.default.func.isRequired,subscribe:r.default.func.isRequired}).isRequired,history:r.default.shape({action:r.default.string.isRequired,listen:r.default.func.isRequired,location:r.default.object.isRequired,push:r.default.func.isRequired}).isRequired,basename:r.default.string,children:r.default.oneOfType([r.default.func,r.default.node]),onLocationChanged:r.default.func.isRequired};var d=function(e){var t=e.context||a.ReactReduxContext;if(null==t)throw"Please upgrade to react-redux v6";return n.default.createElement(t.Consumer,null,(function(t){var r=t.store;return n.default.createElement(i,u({store:r},e))}))};return d.propTypes={context:r.default.object},(0,a.connect)(null,(function(e){return{onLocationChanged:function(t,i,n){return e((0,s.onLocationChanged)(t,i,n))}}}))(d)};t.default=_},"771ac8d3f39d68e91f97":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.routerActions=t.goForward=t.goBack=t.go=t.replace=t.push=t.CALL_HISTORY_METHOD=t.onLocationChanged=t.LOCATION_CHANGE=void 0;var i="@@router/LOCATION_CHANGE";t.LOCATION_CHANGE=i;t.onLocationChanged=function(e,t){return{type:i,payload:{location:e,action:t,isFirstRendering:arguments.length>2&&void 0!==arguments[2]&&arguments[2]}}};var n="@@router/CALL_HISTORY_METHOD";t.CALL_HISTORY_METHOD=n;var r=function(e){return function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return{type:n,payload:{method:e,args:i}}}},a=r("push");t.push=a;var o=r("replace");t.replace=o;var s=r("go");t.go=s;var c=r("goBack");t.goBack=c;var d=r("goForward");t.goForward=d;var l={push:a,replace:o,go:s,goBack:c,goForward:d};t.routerActions=l},"3aced5b508e7389026da":(e,t,i)=>{"use strict";Object.defineProperty(t,"VF",{enumerable:!0,get:function(){return s.push}}),Object.defineProperty(t,"Hm",{enumerable:!0,get:function(){return s.goBack}}),Object.defineProperty(t,"zk",{enumerable:!0,get:function(){return c.default}}),t.iz=t.xI=void 0;var n=d(i("0f29a1925f6bdf1729f9")),r=d(i("3744f7bcbbf01ec2518b")),a=d(i("c780dee00d7495ff9921")),o=d(i("ea22a27be1bef7ef6188")),s=i("771ac8d3f39d68e91f97"),c=d(i("1e75c00f76e39a44f75f"));function d(e){return e&&e.__esModule?e:{default:e}}var l=(0,n.default)(o.default);t.xI=l;var u=(0,r.default)(o.default);t.iz=u;var f=(0,a.default)(o.default),p=f.getLocation,g=f.getAction,h=f.getHash,_=f.getSearch;f.createMatchSelector},"1e75c00f76e39a44f75f":(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i("771ac8d3f39d68e91f97");function r(e){return function(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var a=function(e){return function(t){return function(t){return function(i){if(i.type!==n.CALL_HISTORY_METHOD)return t(i);var a=i.payload,o=a.method,s=a.args;e[o].apply(e,r(s))}}}};t.default=a},"3744f7bcbbf01ec2518b":(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i("771ac8d3f39d68e91f97"),r=function(e){var t=e.fromJS,i=e.merge;return function(e){var r=t({location:e.location,action:e.action});return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=a.type,s=a.payload;if(o===n.LOCATION_CHANGE){var c=s.location,d=s.action;return s.isFirstRendering?e:i(e,{location:t(c),action:d})}return e}}};t.default=r},c780dee00d7495ff9921:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i("999b8422c18ed8d20c8d");function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var a=function(e){var t=e.getIn,i=e.toJS,a=function(e){var n,a=i(t(e,["router"]));if(null==(n=a)||"object"!==r(n)||!t(n,["location"])||!t(n,["action"]))throw'Could not find router reducer in state tree, it must be mounted under "router"';return a},o=function(e){return i(t(a(e),["location"]))};return{getLocation:o,getAction:function(e){return i(t(a(e),["action"]))},getRouter:a,getSearch:function(e){return i(t(a(e),["location","search"]))},getHash:function(e){return i(t(a(e),["location","hash"]))},createMatchSelector:function(e){var t=null,i=null;return function(r){var a=(o(r)||{}).pathname;if(a===t)return i;t=a;var s=(0,n.matchPath)(a,e);return s&&i&&s.url===i.url||(i=s),i}}}};t.default=a},"2ac0a4824d1ab3ffa826":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e,t){if(!e)return e;var i=t.length;if(i){for(var n=e,r=0;r<i&&n;++r)n=n[t[r]];return n}};t.default=i},ea22a27be1bef7ef6188:(e,t,i)=>{"use strict";var n;function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={fromJS:function(e){return e},getIn:((n=i("2ac0a4824d1ab3ffa826"))&&n.__esModule?n:{default:n}).default,merge:function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),n.forEach((function(t){r(e,t,i[t])}))}return e}({},e,t)},toJS:function(e){return e}};t.default=a},be500031d3e0e2c494c1:(e,t,i)=>{"use strict";var n=i("23e988087ac3619ba441");function r(){}function a(){}a.resetWarningCache=r,e.exports=function(){function e(e,t,i,r,a,o){if(o!==n){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:r};return i.PropTypes=i,i}},"777de14c6d9da9d6bb40":(e,t,i)=>{e.exports=i("be500031d3e0e2c494c1")()},"23e988087ac3619ba441":e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},"4d073e2fededcdd3f3d3":e=>{e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},a5e6f0092ff0290e0bcf:(e,t,i)=>{var n=i("621a65702ee1a566fd32")("unscopables"),r=Array.prototype;null==r[n]&&i("5f25c015bbbf9d42c661")(r,n,{}),e.exports=function(e){r[n][e]=!0}},"79c91dcd8cd554c59c7b":(e,t,i)=>{var n=i("a459ab805827640a27e8");e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},"2076e982c14c41925fb4":(e,t,i)=>{var n=i("efae14a3f8cd9a616256"),r=i("ca19e32ab6ee3b3692aa"),a=i("23d432718b3e8ce32362");e.exports=function(e){return function(t,i,o){var s,c=n(t),d=r(c.length),l=a(o,d);if(e&&i!=i){for(;d>l;)if((s=c[l++])!=s)return!0}else for(;d>l;l++)if((e||l in c)&&c[l]===i)return e||l||0;return!e&&-1}}},"6ae9955278ddcf01bbfd":(e,t,i)=>{var n=i("a459ab805827640a27e8"),r=i("8f648b1026e01323935b"),a=i("621a65702ee1a566fd32")("species");e.exports=function(e){var t;return r(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!r(t.prototype)||(t=void 0),n(t)&&null===(t=t[a])&&(t=void 0)),void 0===t?Array:t}},"0594430ce9777a0767aa":(e,t,i)=>{var n=i("6ae9955278ddcf01bbfd");e.exports=function(e,t){return new(n(e))(t)}},"0116c75136b233002fb9":e=>{var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},"5925dad3c5243ffee3db":e=>{var t=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=t)},"0e717e1f47872428608d":(e,t,i)=>{var n=i("4d073e2fededcdd3f3d3");e.exports=function(e,t,i){if(n(e),void 0===t)return e;switch(i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,n){return e.call(t,i,n)};case 3:return function(i,n,r){return e.call(t,i,n,r)}}return function(){return e.apply(t,arguments)}}},"7ad2c0eb9a8edcc472a4":e=>{e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},"5975c7ea3ecd56e534e3":(e,t,i)=>{e.exports=!i("7a7739dd8a198a2cfcb5")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},"68a989d6f90923909f2a":(e,t,i)=>{var n=i("a459ab805827640a27e8"),r=i("1139de1233fd67f45bd7").document,a=n(r)&&n(r.createElement);e.exports=function(e){return a?r.createElement(e):{}}},"380c0734c088ca78ccda":e=>{e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"2d13d93c336705cd8ff9":(e,t,i)=>{var n=i("1139de1233fd67f45bd7"),r=i("5925dad3c5243ffee3db"),a=i("5f25c015bbbf9d42c661"),o=i("88db22626e6c88b175cf"),s=i("0e717e1f47872428608d"),c="prototype",d=function(e,t,i){var l,u,f,p,g=e&d.F,h=e&d.G,_=e&d.S,m=e&d.P,v=e&d.B,y=h?n:_?n[t]||(n[t]={}):(n[t]||{})[c],b=h?r:r[t]||(r[t]={}),w=b[c]||(b[c]={});for(l in h&&(i=t),i)f=((u=!g&&y&&void 0!==y[l])?y:i)[l],p=v&&u?s(f,n):m&&"function"==typeof f?s(Function.call,f):f,y&&o(y,l,f,e&d.U),b[l]!=f&&a(b,l,p),m&&w[l]!=f&&(w[l]=f)};n.core=r,d.F=1,d.G=2,d.S=4,d.P=8,d.B=16,d.W=32,d.U=64,d.R=128,e.exports=d},"7a7739dd8a198a2cfcb5":e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},"3dd7e3cb81b24cbd63d6":(e,t,i)=>{"use strict";var n=i("8f648b1026e01323935b"),r=i("a459ab805827640a27e8"),a=i("ca19e32ab6ee3b3692aa"),o=i("0e717e1f47872428608d"),s=i("621a65702ee1a566fd32")("isConcatSpreadable");e.exports=function e(t,i,c,d,l,u,f,p){for(var g,h,_=l,m=0,v=!!f&&o(f,p,3);m<d;){if(m in c){if(g=v?v(c[m],m,i):c[m],h=!1,r(g)&&(h=void 0!==(h=g[s])?!!h:n(g)),h&&u>0)_=e(t,i,g,a(g.length),_,u-1)-1;else{if(_>=9007199254740991)throw TypeError();t[_]=g}_++}m++}return _}},ef0c48522ce2da15afbb:(e,t,i)=>{e.exports=i("43a62b7f9a94dda95bf8")("native-function-to-string",Function.toString)},"1139de1233fd67f45bd7":e=>{var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},d34390b928ecadc11dc8:e=>{var t={}.hasOwnProperty;e.exports=function(e,i){return t.call(e,i)}},"5f25c015bbbf9d42c661":(e,t,i)=>{var n=i("1b01d0e59d3af79760a0"),r=i("9d5592e83ab7f3d08974");e.exports=i("5975c7ea3ecd56e534e3")?function(e,t,i){return n.f(e,t,r(1,i))}:function(e,t,i){return e[t]=i,e}},"5b9dc0e027f5c68eff1a":(e,t,i)=>{var n=i("1139de1233fd67f45bd7").document;e.exports=n&&n.documentElement},bc1a333d2b6eceac22e3:(e,t,i)=>{e.exports=!i("5975c7ea3ecd56e534e3")&&!i("7a7739dd8a198a2cfcb5")((function(){return 7!=Object.defineProperty(i("68a989d6f90923909f2a")("div"),"a",{get:function(){return 7}}).a}))},"5a3b914e449c6d95aadc":e=>{e.exports=function(e,t,i){var n=void 0===i;switch(t.length){case 0:return n?e():e.call(i);case 1:return n?e(t[0]):e.call(i,t[0]);case 2:return n?e(t[0],t[1]):e.call(i,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(i,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(i,t[0],t[1],t[2],t[3])}return e.apply(i,t)}},a537d0accb907bf9d41f:(e,t,i)=>{var n=i("0116c75136b233002fb9");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},"8f648b1026e01323935b":(e,t,i)=>{var n=i("0116c75136b233002fb9");e.exports=Array.isArray||function(e){return"Array"==n(e)}},a459ab805827640a27e8:e=>{e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},"5c5d334c57135891e397":(e,t,i)=>{"use strict";var n=i("ef09ce044ac3210bc947"),r=i("9d5592e83ab7f3d08974"),a=i("62828dc3ffa96c06b7c9"),o={};i("5f25c015bbbf9d42c661")(o,i("621a65702ee1a566fd32")("iterator"),(function(){return this})),e.exports=function(e,t,i){e.prototype=n(o,{next:r(1,i)}),a(e,t+" Iterator")}},"429cfc8e3ed333e40618":(e,t,i)=>{"use strict";var n=i("46a1a30d151cac60057c"),r=i("2d13d93c336705cd8ff9"),a=i("88db22626e6c88b175cf"),o=i("5f25c015bbbf9d42c661"),s=i("224ae09e536c09e69a0a"),c=i("5c5d334c57135891e397"),d=i("62828dc3ffa96c06b7c9"),l=i("12323e1413cbffdabe02"),u=i("621a65702ee1a566fd32")("iterator"),f=!([].keys&&"next"in[].keys()),p="keys",g="values",h=function(){return this};e.exports=function(e,t,i,_,m,v,y){c(i,t,_);var b,w,E,k=function(e){if(!f&&e in I)return I[e];switch(e){case p:case g:return function(){return new i(this,e)}}return function(){return new i(this,e)}},R=t+" Iterator",S=m==g,O=!1,I=e.prototype,N=I[u]||I["@@iterator"]||m&&I[m],x=N||k(m),A=m?S?k("entries"):x:void 0,T="Array"==t&&I.entries||N;if(T&&(E=l(T.call(new e)))!==Object.prototype&&E.next&&(d(E,R,!0),n||"function"==typeof E[u]||o(E,u,h)),S&&N&&N.name!==g&&(O=!0,x=function(){return N.call(this)}),n&&!y||!f&&!O&&I[u]||o(I,u,x),s[t]=x,s[R]=h,m)if(b={values:S?x:k(g),keys:v?x:k(p),entries:A},y)for(w in b)w in I||a(I,w,b[w]);else r(r.P+r.F*(f||O),t,b);return b}},dabaabbe8ba08d59975f:e=>{e.exports=function(e,t){return{value:t,done:!!e}}},"224ae09e536c09e69a0a":e=>{e.exports={}},"46a1a30d151cac60057c":e=>{e.exports=!1},"0fcd62dab3511fe4dbf9":(e,t,i)=>{"use strict";var n=i("4d073e2fededcdd3f3d3");function r(e){var t,i;this.promise=new e((function(e,n){if(void 0!==t||void 0!==i)throw TypeError("Bad Promise constructor");t=e,i=n})),this.resolve=n(t),this.reject=n(i)}e.exports.f=function(e){return new r(e)}},ef09ce044ac3210bc947:(e,t,i)=>{var n=i("79c91dcd8cd554c59c7b"),r=i("a6d645856102faf17328"),a=i("380c0734c088ca78ccda"),o=i("5f6eded14a8ed86276fc")("IE_PROTO"),s=function(){},c="prototype",d=function(){var e,t=i("68a989d6f90923909f2a")("iframe"),n=a.length;for(t.style.display="none",i("5b9dc0e027f5c68eff1a").appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),d=e.F;n--;)delete d[c][a[n]];return d()};e.exports=Object.create||function(e,t){var i;return null!==e?(s[c]=n(e),i=new s,s[c]=null,i[o]=e):i=d(),void 0===t?i:r(i,t)}},"1b01d0e59d3af79760a0":(e,t,i)=>{var n=i("79c91dcd8cd554c59c7b"),r=i("bc1a333d2b6eceac22e3"),a=i("4ef7a75a1d1957a7c5c0"),o=Object.defineProperty;t.f=i("5975c7ea3ecd56e534e3")?Object.defineProperty:function(e,t,i){if(n(e),t=a(t,!0),n(i),r)try{return o(e,t,i)}catch(e){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(e[t]=i.value),e}},a6d645856102faf17328:(e,t,i)=>{var n=i("1b01d0e59d3af79760a0"),r=i("79c91dcd8cd554c59c7b"),a=i("145c4f2bdc487b2578df");e.exports=i("5975c7ea3ecd56e534e3")?Object.defineProperties:function(e,t){r(e);for(var i,o=a(t),s=o.length,c=0;s>c;)n.f(e,i=o[c++],t[i]);return e}},"12323e1413cbffdabe02":(e,t,i)=>{var n=i("d34390b928ecadc11dc8"),r=i("d394d0a4c1838202489d"),a=i("5f6eded14a8ed86276fc")("IE_PROTO"),o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),n(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},e3136eea77d23f8d97ec:(e,t,i)=>{var n=i("d34390b928ecadc11dc8"),r=i("efae14a3f8cd9a616256"),a=i("2076e982c14c41925fb4")(!1),o=i("5f6eded14a8ed86276fc")("IE_PROTO");e.exports=function(e,t){var i,s=r(e),c=0,d=[];for(i in s)i!=o&&n(s,i)&&d.push(i);for(;t.length>c;)n(s,i=t[c++])&&(~a(d,i)||d.push(i));return d}},"145c4f2bdc487b2578df":(e,t,i)=>{var n=i("e3136eea77d23f8d97ec"),r=i("380c0734c088ca78ccda");e.exports=Object.keys||function(e){return n(e,r)}},"8cea4f2c5f75a90121e7":(e,t,i)=>{var n=i("79c91dcd8cd554c59c7b"),r=i("a459ab805827640a27e8"),a=i("0fcd62dab3511fe4dbf9");e.exports=function(e,t){if(n(e),r(t)&&t.constructor===e)return t;var i=a.f(e);return(0,i.resolve)(t),i.promise}},"9d5592e83ab7f3d08974":e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"88db22626e6c88b175cf":(e,t,i)=>{var n=i("1139de1233fd67f45bd7"),r=i("5f25c015bbbf9d42c661"),a=i("d34390b928ecadc11dc8"),o=i("273d2eedcd369c189e70")("src"),s=i("ef0c48522ce2da15afbb"),c="toString",d=(""+s).split(c);i("5925dad3c5243ffee3db").inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,i,s){var c="function"==typeof i;c&&(a(i,"name")||r(i,"name",t)),e[t]!==i&&(c&&(a(i,o)||r(i,o,e[t]?""+e[t]:d.join(String(t)))),e===n?e[t]=i:s?e[t]?e[t]=i:r(e,t,i):(delete e[t],r(e,t,i)))})(Function.prototype,c,(function(){return"function"==typeof this&&this[o]||s.call(this)}))},"62828dc3ffa96c06b7c9":(e,t,i)=>{var n=i("1b01d0e59d3af79760a0").f,r=i("d34390b928ecadc11dc8"),a=i("621a65702ee1a566fd32")("toStringTag");e.exports=function(e,t,i){e&&!r(e=i?e:e.prototype,a)&&n(e,a,{configurable:!0,value:t})}},"5f6eded14a8ed86276fc":(e,t,i)=>{var n=i("43a62b7f9a94dda95bf8")("keys"),r=i("273d2eedcd369c189e70");e.exports=function(e){return n[e]||(n[e]=r(e))}},"43a62b7f9a94dda95bf8":(e,t,i)=>{var n=i("5925dad3c5243ffee3db"),r=i("1139de1233fd67f45bd7"),a="__core-js_shared__",o=r[a]||(r[a]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:i("46a1a30d151cac60057c")?"pure":"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})},"8b246eab22bc34690d38":(e,t,i)=>{var n=i("79c91dcd8cd554c59c7b"),r=i("4d073e2fededcdd3f3d3"),a=i("621a65702ee1a566fd32")("species");e.exports=function(e,t){var i,o=n(e).constructor;return void 0===o||null==(i=n(o)[a])?t:r(i)}},"40b064d4eb439c0c1c2b":(e,t,i)=>{"use strict";var n=i("7a7739dd8a198a2cfcb5");e.exports=function(e,t){return!!e&&n((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},"57e7a4ee5fd1ce9280ef":(e,t,i)=>{var n=i("2d13d93c336705cd8ff9"),r=i("7ad2c0eb9a8edcc472a4"),a=i("7a7739dd8a198a2cfcb5"),o=i("f3bd18506acf22d8f1d4"),s="["+o+"]",c=RegExp("^"+s+s+"*"),d=RegExp(s+s+"*$"),l=function(e,t,i){var r={},s=a((function(){return!!o[e]()||"\u200b\x85"!="\u200b\x85"[e]()})),c=r[e]=s?t(u):o[e];i&&(r[i]=c),n(n.P+n.F*s,"String",r)},u=l.trim=function(e,t){return e=String(r(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(d,"")),e};e.exports=l},f3bd18506acf22d8f1d4:e=>{e.exports="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},"1ae513448994dc2a1e86":(e,t,i)=>{var n,r,a,o=i("0e717e1f47872428608d"),s=i("5a3b914e449c6d95aadc"),c=i("5b9dc0e027f5c68eff1a"),d=i("68a989d6f90923909f2a"),l=i("1139de1233fd67f45bd7"),u=l.process,f=l.setImmediate,p=l.clearImmediate,g=l.MessageChannel,h=l.Dispatch,_=0,m={},v="onreadystatechange",y=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},b=function(e){y.call(e.data)};f&&p||(f=function(e){for(var t=[],i=1;arguments.length>i;)t.push(arguments[i++]);return m[++_]=function(){s("function"==typeof e?e:Function(e),t)},n(_),_},p=function(e){delete m[e]},"process"==i("0116c75136b233002fb9")(u)?n=function(e){u.nextTick(o(y,e,1))}:h&&h.now?n=function(e){h.now(o(y,e,1))}:g?(a=(r=new g).port2,r.port1.onmessage=b,n=o(a.postMessage,a,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(n=function(e){l.postMessage(e+"","*")},l.addEventListener("message",b,!1)):n=v in d("script")?function(e){c.appendChild(d("script"))[v]=function(){c.removeChild(this),y.call(e)}}:function(e){setTimeout(o(y,e,1),0)}),e.exports={set:f,clear:p}},"23d432718b3e8ce32362":(e,t,i)=>{var n=i("1f3157d073736826d4fa"),r=Math.max,a=Math.min;e.exports=function(e,t){return(e=n(e))<0?r(e+t,0):a(e,t)}},"1f3157d073736826d4fa":e=>{var t=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:t)(e)}},efae14a3f8cd9a616256:(e,t,i)=>{var n=i("a537d0accb907bf9d41f"),r=i("7ad2c0eb9a8edcc472a4");e.exports=function(e){return n(r(e))}},ca19e32ab6ee3b3692aa:(e,t,i)=>{var n=i("1f3157d073736826d4fa"),r=Math.min;e.exports=function(e){return e>0?r(n(e),9007199254740991):0}},d394d0a4c1838202489d:(e,t,i)=>{var n=i("7ad2c0eb9a8edcc472a4");e.exports=function(e){return Object(n(e))}},"4ef7a75a1d1957a7c5c0":(e,t,i)=>{var n=i("a459ab805827640a27e8");e.exports=function(e,t){if(!n(e))return e;var i,r;if(t&&"function"==typeof(i=e.toString)&&!n(r=i.call(e)))return r;if("function"==typeof(i=e.valueOf)&&!n(r=i.call(e)))return r;if(!t&&"function"==typeof(i=e.toString)&&!n(r=i.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},"273d2eedcd369c189e70":e=>{var t=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++t+i).toString(36))}},"5abe37fc05566b7b9eff":(e,t,i)=>{var n=i("1139de1233fd67f45bd7").navigator;e.exports=n&&n.userAgent||""},c68991e63a6e99ff2511:(e,t,i)=>{var n=i("1139de1233fd67f45bd7"),r=i("5925dad3c5243ffee3db"),a=i("46a1a30d151cac60057c"),o=i("42d2ac6d92467eceff72"),s=i("1b01d0e59d3af79760a0").f;e.exports=function(e){var t=r.Symbol||(r.Symbol=a?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:o.f(e)})}},"42d2ac6d92467eceff72":(e,t,i)=>{t.f=i("621a65702ee1a566fd32")},"621a65702ee1a566fd32":(e,t,i)=>{var n=i("43a62b7f9a94dda95bf8")("wks"),r=i("273d2eedcd369c189e70"),a=i("1139de1233fd67f45bd7").Symbol,o="function"==typeof a;(e.exports=function(e){return n[e]||(n[e]=o&&a[e]||(o?a:r)("Symbol."+e))}).store=n},"307014e72ed12da69e15":(e,t,i)=>{"use strict";var n=i("a5e6f0092ff0290e0bcf"),r=i("dabaabbe8ba08d59975f"),a=i("224ae09e536c09e69a0a"),o=i("efae14a3f8cd9a616256");e.exports=i("429cfc8e3ed333e40618")(Array,"Array",(function(e,t){this._t=o(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,i=this._i++;return!e||i>=e.length?(this._t=void 0,r(1)):r(0,"keys"==t?i:"values"==t?e[i]:[i,e[i]])}),"values"),a.Arguments=a.Array,n("keys"),n("values"),n("entries")},"5baa1143f58e62614ca0":(e,t,i)=>{"use strict";var n=i("2d13d93c336705cd8ff9"),r=i("4d073e2fededcdd3f3d3"),a=i("d394d0a4c1838202489d"),o=i("7a7739dd8a198a2cfcb5"),s=[].sort,c=[1,2,3];n(n.P+n.F*(o((function(){c.sort(void 0)}))||!o((function(){c.sort(null)}))||!i("40b064d4eb439c0c1c2b")(s)),"Array",{sort:function(e){return void 0===e?s.call(a(this)):s.call(a(this),r(e))}})},b04dcea169e01651bec4:(e,t,i)=>{"use strict";var n=i("2d13d93c336705cd8ff9"),r=i("3dd7e3cb81b24cbd63d6"),a=i("d394d0a4c1838202489d"),o=i("ca19e32ab6ee3b3692aa"),s=i("4d073e2fededcdd3f3d3"),c=i("0594430ce9777a0767aa");n(n.P,"Array",{flatMap:function(e){var t,i,n=a(this);return s(e),t=o(n.length),i=c(n,0),r(i,n,n,t,0,1,e,arguments[1]),i}}),i("a5e6f0092ff0290e0bcf")("flatMap")},da8dbcc3b692fc0676cc:(e,t,i)=>{"use strict";var n=i("2d13d93c336705cd8ff9"),r=i("5925dad3c5243ffee3db"),a=i("1139de1233fd67f45bd7"),o=i("8b246eab22bc34690d38"),s=i("8cea4f2c5f75a90121e7");n(n.P+n.R,"Promise",{finally:function(e){var t=o(this,r.Promise||a.Promise),i="function"==typeof e;return this.then(i?function(i){return s(t,e()).then((function(){return i}))}:e,i?function(i){return s(t,e()).then((function(){throw i}))}:e)}})},"87df535ec0c75eb666f4":(e,t,i)=>{"use strict";i("57e7a4ee5fd1ce9280ef")("trimLeft",(function(e){return function(){return e(this,1)}}),"trimStart")},b9bd1a2a618fdda58e33:(e,t,i)=>{"use strict";i("57e7a4ee5fd1ce9280ef")("trimRight",(function(e){return function(){return e(this,2)}}),"trimEnd")},f8695b95b3c9135976f0:(e,t,i)=>{i("c68991e63a6e99ff2511")("asyncIterator")},c08bb95a2a1e7d3a36d4:(e,t,i)=>{for(var n=i("307014e72ed12da69e15"),r=i("145c4f2bdc487b2578df"),a=i("88db22626e6c88b175cf"),o=i("1139de1233fd67f45bd7"),s=i("5f25c015bbbf9d42c661"),c=i("224ae09e536c09e69a0a"),d=i("621a65702ee1a566fd32"),l=d("iterator"),u=d("toStringTag"),f=c.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},g=r(p),h=0;h<g.length;h++){var _,m=g[h],v=p[m],y=o[m],b=y&&y.prototype;if(b&&(b[l]||s(b,l,f),b[u]||s(b,u,m),c[m]=f,v))for(_ in n)b[_]||a(b,_,n[_],!0)}},"6c07e9b5d58510c21784":(e,t,i)=>{var n=i("2d13d93c336705cd8ff9"),r=i("1ae513448994dc2a1e86");n(n.G+n.B,{setImmediate:r.set,clearImmediate:r.clear})},"9e57e2b1bf9af3290fa7":(e,t,i)=>{var n=i("1139de1233fd67f45bd7"),r=i("2d13d93c336705cd8ff9"),a=i("5abe37fc05566b7b9eff"),o=[].slice,s=/MSIE .\./.test(a),c=function(e){return function(t,i){var n=arguments.length>2,r=!!n&&o.call(arguments,2);return e(n?function(){("function"==typeof t?t:Function(t)).apply(this,r)}:t,i)}};r(r.G+r.B+r.F*s,{setTimeout:c(n.setTimeout),setInterval:c(n.setInterval)})},"9f3a202bdf989d5f9e58":function(e,t){!function(e){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n)}}function r(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function o(e){var t=a(e,"string");return"symbol"==typeof t?t:String(t)}var s={SESSIONS:"sessions",EVENTS:"events",VIEWS:"views",SCROLLS:"scrolls",CLICKS:"clicks",FORMS:"forms",CRASHES:"crashes",ATTRIBUTION:"attribution",USERS:"users",STAR_RATING:"star-rating",LOCATION:"location",APM:"apm",FEEDBACK:"feedback",REMOTE_CONFIG:"remote-config"},c={NPS:"[CLY]_nps",SURVEY:"[CLY]_survey",STAR_RATING:"[CLY]_star_rating",VIEW:"[CLY]_view",ORIENTATION:"[CLY]_orientation",ACTION:"[CLY]_action"},d=Object.values(c),l={ERROR:"[ERROR] ",WARNING:"[WARNING] ",INFO:"[INFO] ",DEBUG:"[DEBUG] ",VERBOSE:"[VERBOSE] "},u={DEVELOPER_SUPPLIED:0,SDK_GENERATED:1,TEMPORARY_ID:2,URL_PROVIDED:3},f={BEAT_INTERVAL:500,QUEUE_SIZE:1e3,FAIL_TIMEOUT_AMOUNT:60,INACTIVITY_TIME:20,SESSION_UPDATE:60,MAX_EVENT_BATCH:100,SESSION_COOKIE_TIMEOUT:30,MAX_KEY_LENGTH:128,MAX_VALUE_SIZE:256,MAX_SEGMENTATION_VALUES:100,MAX_BREADCRUMB_COUNT:100,MAX_STACKTRACE_LINES_PER_THREAD:30,MAX_STACKTRACE_LINE_LENGTH:200},p={BOOMERANG_SRC:"https://cdn.jsdelivr.net/npm/countly-sdk-web@latest/plugin/boomerang/boomerang.min.js",CLY_BOOMERANG_SRC:"https://cdn.jsdelivr.net/npm/countly-sdk-web@latest/plugin/boomerang/countly_boomerang.js"},g=Object.freeze({errorCount:"cly_hc_error_count",warningCount:"cly_hc_warning_count",statusCode:"cly_hc_status_code",errorMessage:"cly_hc_error_message"}),h="23.12.5",_="javascript_native_web",m=/^(((([^:\/#\?]+:)?(?:(\/\/)((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/,v="undefined"!=typeof window,y=globalThis.Countly||{};function b(e){var t=[];if(void 0!==e.options)for(var i=0;i<e.options.length;i++)e.options[i].selected&&t.push(e.options[i].value);return t.join(", ")}function w(){var e="xxxxxxxx";return(e=k(e,"[x]"))+Date.now().toString()}function E(){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";return e=k(e,"[xy]")}function k(e,t){var i=(new Date).getTime(),n=new RegExp(t,"g");return e.replace(n,(function(e){var t=(i+16*Math.random())%16|0;return("x"===e?t:3&t|8).toString(16)}))}function R(){return Math.floor((new Date).getTime()/1e3)}var S=0;function O(){var e=(new Date).getTime();return S>=e?S++:S=e,S}function I(e,t,i){if(t&&Object.keys(t).length){if(void 0!==t[e])return t[e]}else if(void 0!==y[e])return y[e];return i}function N(e,t,i){for(var n in y.i)y.i[n].tracking_crashes&&y.i[n].recordError(e,t,i)}function x(e){var t=[];for(var i in e)t.push(i+"="+encodeURIComponent(e[i]));return t.join("&")}function A(e){return"string"==typeof e&&"/"===e.substring(e.length-1)?e.substring(0,e.length-1):e}function T(e,t){for(var i,n={},r=0,a=t.length;r<a;r++)void 0!==e[i=t[r]]&&(n[i]=e[i]);return n}function D(e,t,i){if(i){for(var n,r=0,a=i.length;r<a;r++)void 0!==t[n=i[r]]&&(e[n]=t[n]);return e}}function C(e,t,i,n,r,a){var o={};if(e){if(Object.keys(e).length>n){var s={},c=0;for(var d in e)c<n&&(s[d]=e[d],c++);e=s}for(var l in e){var u=L(l,t,r,a),f=L(e[l],i,r,a);o[u]=f}}return o}function L(e,t,i,n){var r=e;return"number"==typeof e&&(e=e.toString()),"string"==typeof e&&e.length>t&&(r=e.substring(0,t),n(l.DEBUG,i+", Key: [ "+e+" ] is longer than accepted length. It will be truncated.")),r}function B(e,t){for(t=t.toUpperCase();e;){if(e.nodeName.toUpperCase()===t)return e;e=e.parentElement}}function G(e,t,i){v&&(null!=e?void 0!==e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent("on"+t,i):Q()&&console.warn("[WARNING] [Countly] add_event_listener, Can't bind ["+t+"] event to nonexisting element"))}function P(e){return e?void 0!==e.target?e.target:e.srcElement:window.event.srcElement}function F(e){if(e)return e;var t=navigator.userAgent;return t||(t=W()),t}function W(e){if(e)return e;var t="";return navigator.userAgentData&&(t=navigator.userAgentData.brands.map((function(e){return e.brand+":"+e.version})).join(),t+=navigator.userAgentData.mobile?" mobi ":" ",t+=navigator.userAgentData.platform),t}function U(e){var t;if(e)t=e;else{if(navigator.userAgentData&&navigator.userAgentData.mobile)return"phone";t=F()}t=t.toLowerCase();var i="desktop",n=/(mobi|ipod|phone|blackberry|opera mini|fennec|minimo|symbian|psp|nintendo ds|archos|skyfire|puffin|blazer|bolt|gobrowser|iris|maemo|semc|teashark|uzard)/;return/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(t)?i="tablet":n.test(t)&&(i="phone"),i}function M(e){var t=/(CountlySiteBot|nuhk|Googlebot|GoogleSecurityScanner|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver|bingbot|Google Web Preview|Mediapartners-Google|AdsBot-Google|Baiduspider|Ezooms|YahooSeeker|AltaVista|AVSearch|Mercator|Scooter|InfoSeek|Ultraseek|Lycos|Wget|YandexBot|Yandex|YaDirectFetcher|SiteBot|Exabot|AhrefsBot|MJ12bot|TurnitinBot|magpie-crawler|Nutch Crawler|CMS Crawler|rogerbot|Domnutch|ssearch_bot|XoviBot|netseer|digincore|fr-crawler|wesee|AliasIO|contxbot|PingdomBot|BingPreview|HeadlessChrome|Lighthouse)/;if(e)return t.test(e);var i=t.test(F()),n=t.test(W());return i||n}function z(e){return void 0===e.pageY&&"number"==typeof e.clientX&&document.documentElement&&(e.pageX=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,e.pageY=e.clientY+document.body.scrollTop+document.documentElement.scrollTop),e}function V(){var e=document;return Math.max(Math.max(e.body.scrollHeight,e.documentElement.scrollHeight),Math.max(e.body.offsetHeight,e.documentElement.offsetHeight),Math.max(e.body.clientHeight,e.documentElement.clientHeight))}function j(){var e=document;return Math.max(Math.max(e.body.scrollWidth,e.documentElement.scrollWidth),Math.max(e.body.offsetWidth,e.documentElement.offsetWidth),Math.max(e.body.clientWidth,e.documentElement.clientWidth))}function q(){var e=document;return Math.min(Math.min(e.body.clientHeight,e.documentElement.clientHeight),Math.min(e.body.offsetHeight,e.documentElement.offsetHeight),window.innerHeight)}function H(){return window.innerWidth>window.innerHeight?"landscape":"portrait"}function K(e,t,i,n,r,a){var o,s=document.createElement(e);s.setAttribute(t,i),s.setAttribute(n,r);var c=function(){o||a(),o=!0};a&&(s.onreadystatechange=c,s.onload=c),document.getElementsByTagName("head")[0].appendChild(s)}function J(e,t){K("script","type","text/javascript","src",e,t)}function Y(e,t){K("link","rel","stylesheet","href",e,t)}function X(){if(v){var e=document.getElementById("cly-loader");if(!e){var t="#cly-loader {height: 4px; width: 100%; position: absolute; z-index: 99999; overflow: hidden; background-color: #fff; top:0px; left:0px;}#cly-loader:before{display: block; position: absolute; content: ''; left: -200px; width: 200px; height: 4px; background-color: #2EB52B; animation: cly-loading 2s linear infinite;}@keyframes cly-loading { from {left: -200px; width: 30%;} 50% {width: 30%;} 70% {width: 70%;} 80% { left: 50%;} 95% {left: 120%;} to {left: 100%;}}",i=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t)),i.appendChild(n),(e=document.createElement("div")).setAttribute("id","cly-loader"),document.body.onload=function(){if(y.showLoaderProtection)Q()&&console.warn("[WARNING] [Countly] showloader, Loader is already on");else try{document.body.appendChild(e)}catch(e){Q()&&console.error("[ERROR] [Countly] showLoader, Body is not loaded for loader to append: "+e)}}}e.style.display="block"}}function Q(){return!(!y||!y.debug||"undefined"==typeof console)}function $(){if(v){y.showLoaderProtection=!0;var e=document.getElementById("cly-loader");e&&(e.style.display="none")}}var Z=r((function e(n){i(this,e);var r,a=this,o=!y.i,p=!1,k="/i",S="/o/sdk",K=I("interval",n,f.BEAT_INTERVAL),Z=I("queue_size",n,f.QUEUE_SIZE),ee=[],te=[],ie={},ne=[],re={},ae=I("ignore_referrers",n,[]),oe=null,se=!0,ce=0,de=null,le=0,ue=0,fe=0,pe=I("fail_timeout",n,f.FAIL_TIMEOUT_AMOUNT),ge=I("inactivity_time",n,f.INACTIVITY_TIME),he=0,_e=I("session_update",n,f.SESSION_UPDATE),me=I("max_events",n,f.MAX_EVENT_BATCH),ve=I("max_logs",n,null),ye=I("use_session_cookie",n,!0),be=I("session_cookie_timeout",n,f.SESSION_COOKIE_TIMEOUT),we=!0,Ee=!1,ke=I("offline_mode",n,!1),Re={},Se=!0,Oe=R(),Ie=!0,Ne=null,xe=u.SDK_GENERATED,Ae=!1,Te=0,De=!1,Ce=null,Le=null,Be=null,Ge=I("sdk_name",n,_),Pe=I("sdk_version",n,h);try{localStorage.setItem("cly_testLocal",!0),localStorage.removeItem("cly_testLocal")}catch(e){ct(l.ERROR,"Local storage test failed, Halting local storage support: "+e),Ie=!1}for(var Fe,We={},Ue=0;Ue<y.features.length;Ue++)We[y.features[Ue]]={};this.initialize=function(){if(this.serialize=I("serialize",n,y.serialize),this.deserialize=I("deserialize",n,y.deserialize),this.getViewName=I("getViewName",n,y.getViewName),this.getViewUrl=I("getViewUrl",n,y.getViewUrl),this.getSearchQuery=I("getSearchQuery",n,y.getSearchQuery),this.DeviceIdType=y.DeviceIdType,this.namespace=I("namespace",n,""),this.clearStoredId=I("clear_stored_id",n,!1),this.app_key=I("app_key",n,null),this.onload=I("onload",n,[]),this.utm=I("utm",n,{source:!0,medium:!0,campaign:!0,term:!0,content:!0}),this.ignore_prefetch=I("ignore_prefetch",n,!0),this.rcAutoOptinAb=I("rc_automatic_optin_for_ab",n,!0),this.useExplicitRcApi=I("use_explicit_rc_api",n,!1),this.debug=I("debug",n,!1),this.test_mode=I("test_mode",n,!1),this.test_mode_eq=I("test_mode_eq",n,!1),this.metrics=I("metrics",n,{}),this.headers=I("headers",n,{}),this.url=A(I("url",n,"")),this.app_version=I("app_version",n,"0.0"),this.country_code=I("country_code",n,null),this.city=I("city",n,null),this.ip_address=I("ip_address",n,null),this.ignore_bots=I("ignore_bots",n,!0),this.force_post=I("force_post",n,!1),this.remote_config=I("remote_config",n,!1),this.ignore_visitor=I("ignore_visitor",n,!1),this.require_consent=I("require_consent",n,!1),this.track_domains=v?I("track_domains",n,!0):void 0,this.storage=I("storage",n,"default"),this.enableOrientationTracking=v?I("enable_orientation_tracking",n,!0):void 0,this.maxKeyLength=I("max_key_length",n,f.MAX_KEY_LENGTH),this.maxValueSize=I("max_value_size",n,f.MAX_VALUE_SIZE),this.maxSegmentationValues=I("max_segmentation_values",n,f.MAX_SEGMENTATION_VALUES),this.maxBreadcrumbCount=I("max_breadcrumb_count",n,null),this.maxStackTraceLinesPerThread=I("max_stack_trace_lines_per_thread",n,f.MAX_STACKTRACE_LINES_PER_THREAD),this.maxStackTraceLineLength=I("max_stack_trace_line_length",n,f.MAX_STACKTRACE_LINE_LENGTH),this.heatmapWhitelist=I("heatmap_whitelist",n,[]),a.hcErrorCount=kt(g.errorCount)||0,a.hcWarningCount=kt(g.warningCount)||0,a.hcStatusCode=kt(g.statusCode)||-1,a.hcErrorMessage=kt(g.errorMessage)||"",ve&&!this.maxBreadcrumbCount?(this.maxBreadcrumbCount=ve,ct(l.WARNING,"initialize, 'maxCrashLogs' is deprecated. Use 'maxBreadcrumbCount' instead!")):ve||this.maxBreadcrumbCount||(this.maxBreadcrumbCount=100),"cookie"===this.storage&&(Ie=!1),this.rcAutoOptinAb||this.useExplicitRcApi||(ct(l.WARNING,"initialize, Auto opting is disabled, switching to explicit RC API"),this.useExplicitRcApi=!0),Array.isArray(ae)||(ae=[]),""===this.url&&(ct(l.ERROR,"initialize, Please provide server URL"),this.ignore_visitor=!0),kt("cly_ignore")&&(this.ignore_visitor=!0),Ot(),ee=kt("cly_queue")||[],te=kt("cly_event")||[],ie=kt("cly_remote_configs")||{},this.clearStoredId&&(kt("cly_id")&&!m&&(this.device_id=kt("cly_id"),ct(l.DEBUG,"initialize, temporarily using the previous device ID to flush existing events"),(xe=kt("cly_id_type"))||(ct(l.DEBUG,"initialize, No device ID type info from the previous session, falling back to DEVELOPER_SUPPLIED, for event flushing"),xe=u.DEVELOPER_SUPPLIED),it(),Ke(),this.device_id=void 0,xe=u.SDK_GENERATED),ct(l.INFO,"initialize, Clearing the device ID storage"),St("cly_id"),St("cly_id_type"),St("cly_session")),He(),v)if(window.name&&0===window.name.indexOf("cly:"))try{this.passed_data=JSON.parse(window.name.replace("cly:",""))}catch(e){ct(l.ERROR,"initialize, Could not parse name: "+window.name+", error: "+e)}else if(location.hash&&0===location.hash.indexOf("#cly:"))try{this.passed_data=JSON.parse(location.hash.replace("#cly:",""))}catch(e){ct(l.ERROR,"initialize, Could not parse hash: "+location.hash+", error: "+e)}if((this.passed_data&&this.passed_data.app_key&&this.passed_data.app_key===this.app_key||this.passed_data&&!this.passed_data.app_key&&o)&&this.passed_data.token&&this.passed_data.purpose){this.passed_data.token!==kt("cly_old_token")&&(mt(this.passed_data.token),Rt("cly_old_token",this.passed_data.token));var e=[];Array.isArray(this.heatmapWhitelist)?(this.heatmapWhitelist.push(this.url),e=this.heatmapWhitelist.map((function(e){return A(e)}))):e=[this.url],e.includes(this.passed_data.url)&&"heatmap"===this.passed_data.purpose&&(this.ignore_visitor=!0,X(),J(this.passed_data.url+"/views/heatmap.js",$))}if(this.ignore_visitor)ct(l.WARNING,"initialize, ignore_visitor:["+this.ignore_visitor+"], this user will not be tracked");else{ct(l.DEBUG,Ge===_&&Pe===h?"initialize, SDK name:["+Ge+"], version:["+Pe+"]":"initialize, SDK name:["+Ge+"], version:["+Pe+"], default name:["+_+"] and default version:["+h+"]"),ct(l.DEBUG,"initialize, app_key:["+this.app_key+"], url:["+this.url+"]"),ct(l.DEBUG,"initialize, device_id:["+I("device_id",n,void 0)+"]"),ct(l.DEBUG,"initialize, require_consent is enabled:["+this.require_consent+"]");try{ct(l.DEBUG,"initialize, metric override:["+JSON.stringify(this.metrics)+"]"),ct(l.DEBUG,"initialize, header override:["+JSON.stringify(this.headers)+"]"),ct(l.DEBUG,"initialize, number of onload callbacks provided:["+this.onload.length+"]"),ct(l.DEBUG,"initialize, utm tags:["+JSON.stringify(this.utm)+"]"),ae&&ct(l.DEBUG,"initialize, referrers to ignore :["+JSON.stringify(ae)+"]")}catch(e){ct(l.ERROR,"initialize, Could not stringify some config object values")}ct(l.DEBUG,"initialize, app_version:["+this.app_version+"]"),ct(l.DEBUG,"initialize, provided location info; country_code:["+this.country_code+"], city:["+this.city+"], ip_address:["+this.ip_address+"]"),""!==this.namespace&&ct(l.DEBUG,"initialize, namespace given:["+this.namespace+"]"),this.clearStoredId&&ct(l.DEBUG,"initialize, clearStoredId flag set to:["+this.clearStoredId+"]"),this.ignore_prefetch&&ct(l.DEBUG,"initialize, ignoring pre-fetching and pre-rendering from counting as real website visits :["+this.ignore_prefetch+"]"),this.test_mode&&ct(l.WARNING,"initialize, test_mode:["+this.test_mode+"], request queue won't be processed"),this.test_mode_eq&&ct(l.WARNING,"initialize, test_mode_eq:["+this.test_mode_eq+"], event queue won't be processed"),this.heatmapWhitelist&&ct(l.DEBUG,"initialize, heatmap whitelist:["+JSON.stringify(this.heatmapWhitelist)+"], these domains will be whitelisted"),"default"!==this.storage&&ct(l.DEBUG,"initialize, storage is set to:["+this.storage+"]"),this.ignore_bots&&ct(l.DEBUG,"initialize, ignore traffic from bots :["+this.ignore_bots+"]"),this.force_post&&ct(l.DEBUG,"initialize, forced post method for all requests:["+this.force_post+"]"),this.remote_config&&ct(l.DEBUG,"initialize, remote_config callback provided:["+!!this.remote_config+"]"),"boolean"==typeof this.rcAutoOptinAb&&ct(l.DEBUG,"initialize, automatic RC optin is enabled:["+this.rcAutoOptinAb+"]"),this.useExplicitRcApi||ct(l.WARNING,"initialize, will use legacy RC API. Consider enabling new API during init with use_explicit_rc_api flag"),this.track_domains&&ct(l.DEBUG,"initialize, tracking domain info:["+this.track_domains+"]"),this.enableOrientationTracking&&ct(l.DEBUG,"initialize, enableOrientationTracking:["+this.enableOrientationTracking+"]"),ye||ct(l.WARNING,"initialize, use_session_cookie is enabled:["+ye+"]"),ke&&ct(l.DEBUG,"initialize, offline_mode:["+ke+"], user info won't be send to the servers"),ke&&ct(l.DEBUG,"initialize, stored remote configs:["+JSON.stringify(ie)+"]"),ct(l.DEBUG,"initialize, 'getViewName' callback override provided:["+(this.getViewName!==y.getViewName)+"]"),ct(l.DEBUG,"initialize, 'getSearchQuery' callback override provided:["+(this.getSearchQuery!==y.getSearchQuery)+"]"),this.maxKeyLength!==f.MAX_KEY_LENGTH&&ct(l.DEBUG,"initialize, maxKeyLength set to:["+this.maxKeyLength+"] characters"),this.maxValueSize!==f.MAX_VALUE_SIZE&&ct(l.DEBUG,"initialize, maxValueSize set to:["+this.maxValueSize+"] characters"),this.maxSegmentationValues!==f.MAX_SEGMENTATION_VALUES&&ct(l.DEBUG,"initialize, maxSegmentationValues set to:["+this.maxSegmentationValues+"] key/value pairs"),this.maxBreadcrumbCount!==f.MAX_BREADCRUMB_COUNT&&ct(l.DEBUG,"initialize, maxBreadcrumbCount for custom logs set to:["+this.maxBreadcrumbCount+"] entries"),this.maxStackTraceLinesPerThread!==f.MAX_STACKTRACE_LINES_PER_THREAD&&ct(l.DEBUG,"initialize, maxStackTraceLinesPerThread set to:["+this.maxStackTraceLinesPerThread+"] lines"),this.maxStackTraceLineLength!==f.MAX_STACKTRACE_LINE_LENGTH&&ct(l.DEBUG,"initialize, maxStackTraceLineLength set to:["+this.maxStackTraceLineLength+"] characters"),K!==f.BEAT_INTERVAL&&ct(l.DEBUG,"initialize, interval for heartbeats set to:["+K+"] milliseconds"),Z!==f.QUEUE_SIZE&&ct(l.DEBUG,"initialize, queue_size set to:["+Z+"] items max"),pe!==f.FAIL_TIMEOUT_AMOUNT&&ct(l.DEBUG,"initialize, fail_timeout set to:["+pe+"] seconds of wait time after a failed connection to server"),ge!==f.INACTIVITY_TIME&&ct(l.DEBUG,"initialize, inactivity_time set to:["+ge+"] minutes to consider a user as inactive after no observable action"),_e!==f.SESSION_UPDATE&&ct(l.DEBUG,"initialize, session_update set to:["+_e+"] seconds to check if extending a session is needed while the user is active"),me!==f.MAX_EVENT_BATCH&&ct(l.DEBUG,"initialize, max_events set to:["+me+"] events to send in one batch"),ve&&ct(l.WARNING,"initialize, max_logs set to:["+ve+"] breadcrumbs to store for crash logs max, deprecated "),be!==f.SESSION_COOKIE_TIMEOUT&&ct(l.DEBUG,"initialize, session_cookie_timeout set to:["+be+"] minutes to expire a cookies session"),ct(l.INFO,"initialize, Countly initialized");var t=null,i=a.getSearchQuery(),r=!1,s={};if(i){0===i.indexOf("?")&&(i=i.substring(1));for(var c=i.split("&"),d=0;d<c.length;d++){var p=c[d].split("=");"cly_id"===p[0]?Rt("cly_cmp_id",p[1]):"cly_uid"===p[0]?Rt("cly_cmp_uid",p[1]):"cly_device_id"===p[0]?t=p[1]:0===(p[0]+"").indexOf("utm_")&&this.utm[p[0].replace("utm_","")]&&(s[p[0].replace("utm_","")]=p[1],r=!0)}}var m="[CLY]_temp_id"===kt("cly_id"),b=I("device_id",n,void 0);if("number"==typeof b&&(b=b.toString()),kt("cly_id")&&!m?(this.device_id=kt("cly_id"),ct(l.INFO,"initialize, Set the stored device ID"),(xe=kt("cly_id_type"))||(ct(l.INFO,"initialize, No device ID type info from the previous session, falling back to DEVELOPER_SUPPLIED"),xe=u.DEVELOPER_SUPPLIED)):null!==t?(ct(l.INFO,"initialize, Device ID set by URL"),this.device_id=t,xe=u.URL_PROVIDED):b?(ct(l.INFO,"initialize, Device ID set by developer"),this.device_id=b,n&&Object.keys(n).length?void 0!==n.device_id&&(xe=u.DEVELOPER_SUPPLIED):void 0!==y.device_id&&(xe=u.DEVELOPER_SUPPLIED)):ke||m?(this.device_id="[CLY]_temp_id",xe=u.TEMPORARY_ID,ke&&m?ct(l.INFO,"initialize, Temp ID set, continuing offline mode from previous app session"):ke&&!m?ct(l.INFO,"initialize, Temp ID set, entering offline mode"):(ke=!0,ct(l.INFO,"initialize, Temp ID set, enabling offline mode"))):(ct(l.INFO,"initialize, Generating the device ID"),this.device_id=I("device_id",n,nt()),n&&Object.keys(n).length?void 0!==n.device_id&&(xe=u.DEVELOPER_SUPPLIED):void 0!==y.device_id&&(xe=u.DEVELOPER_SUPPLIED)),Rt("cly_id",this.device_id),Rt("cly_id_type",xe),r){for(var w in Be={},this.utm)s[w]?(this.userData.set("utm_"+w,s[w]),Be[w]=s[w]):this.userData.unset("utm_"+w);this.userData.save()}Ye(),setTimeout((function(){y.noHeartBeat?ct(l.WARNING,"initialize, Heartbeat disabled. This is for testing purposes only!"):tt(),a.remote_config&&a.fetch_remote_config(a.remote_config)}),1),v&&document.documentElement.setAttribute("data-countly-useragent",F()),It.sendInstantHCRequest()}},this.halt=function(){ct(l.WARNING,"halt, Resetting Countly"),y.i=void 0,y.q=[],y.noHeartBeat=void 0,o=!y.i,p=!1,k="/i",S="/o/sdk",K=500,Z=1e3,ee=[],te=[],ie={},ne=[],re={},ae=[],oe=null,se=!0,ce=0,de=null,le=0,ue=0,fe=0,pe=60,ge=20,he=0,_e=60,me=100,ve=null,ye=!0,be=30,we=!0,Ee=!1,ke=!1,Re={},Se=!0,Oe=R(),Ie=!0,Ne=null,xe=u.SDK_GENERATED,Ae=!1,Te=0,De=!1,Ce=null,Le=null,Be=null;try{localStorage.setItem("cly_testLocal",!0),localStorage.removeItem("cly_testLocal")}catch(e){ct(l.ERROR,"halt, Local storage test failed, will fallback to cookies"),Ie=!1}y.features=[s.SESSIONS,s.EVENTS,s.VIEWS,s.SCROLLS,s.CLICKS,s.FORMS,s.CRASHES,s.ATTRIBUTION,s.USERS,s.STAR_RATING,s.LOCATION,s.APM,s.FEEDBACK,s.REMOTE_CONFIG],We={};for(var e=0;e<y.features.length;e++)We[y.features[e]]={};a.app_key=void 0,a.device_id=void 0,a.onload=void 0,a.utm=void 0,a.ignore_prefetch=void 0,a.debug=void 0,a.test_mode=void 0,a.test_mode_eq=void 0,a.metrics=void 0,a.headers=void 0,a.url=void 0,a.app_version=void 0,a.country_code=void 0,a.city=void 0,a.ip_address=void 0,a.ignore_bots=void 0,a.force_post=void 0,a.rcAutoOptinAb=void 0,a.useExplicitRcApi=void 0,a.remote_config=void 0,a.ignore_visitor=void 0,a.require_consent=void 0,a.track_domains=void 0,a.storage=void 0,a.enableOrientationTracking=void 0,a.maxKeyLength=void 0,a.maxValueSize=void 0,a.maxSegmentationValues=void 0,a.maxBreadcrumbCount=void 0,a.maxStackTraceLinesPerThread=void 0,a.maxStackTraceLineLength=void 0},this.group_features=function(e){if(ct(l.INFO,"group_features, Grouping features"),e)for(var t in e)We[t]?ct(l.WARNING,"group_features, Feature name ["+t+"] is already reserved"):"string"==typeof e[t]?We[t]={features:[e[t]]}:e[t]&&Array.isArray(e[t])&&e[t].length?We[t]={features:e[t]}:ct(l.ERROR,"group_features, Incorrect feature list for ["+t+"] value: ["+e[t]+"]");else ct(l.ERROR,"group_features, Incorrect features:["+e+"]")},this.check_consent=function(e){return ct(l.INFO,"check_consent, Checking if consent is given for specific feature:["+e+"]"),this.require_consent?We[e]?!(!We[e]||!We[e].optin):(ct(l.ERROR,"check_consent, No feature available for ["+e+"]"),!1):(ct(l.INFO,"check_consent, require_consent is off, no consent is necessary"),!0)},this.get_device_id_type=function(){var e;switch(ct(l.INFO,"check_device_id_type, Retrieving the current device id type.["+xe+"]"),xe){case u.SDK_GENERATED:e=a.DeviceIdType.SDK_GENERATED;break;case u.URL_PROVIDED:case u.DEVELOPER_SUPPLIED:e=a.DeviceIdType.DEVELOPER_SUPPLIED;break;case u.TEMPORARY_ID:e=a.DeviceIdType.TEMPORARY_ID;break;default:e=-1}return e},this.get_device_id=function(){return ct(l.INFO,"get_device_id, Retrieving the device id: ["+a.device_id+"]"),a.device_id},this.check_any_consent=function(){if(ct(l.INFO,"check_any_consent, Checking if any consent is given"),!this.require_consent)return ct(l.INFO,"check_any_consent, require_consent is off, no consent is necessary"),!0;for(var e in We)if(We[e]&&We[e].optin)return!0;return ct(l.INFO,"check_any_consent, No consents given"),!1},this.add_consent=function(e){if(ct(l.INFO,"add_consent, Adding consent for ["+e+"]"),Array.isArray(e))for(var t=0;t<e.length;t++)this.add_consent(e[t]);else We[e]?We[e].features?(We[e].optin=!0,this.add_consent(We[e].features)):!0!==We[e].optin&&(We[e].optin=!0,Me(),setTimeout((function(){e===s.SESSIONS&&Re.begin_session?(a.begin_session.apply(a,Re.begin_session),Re.begin_session=null):e===s.VIEWS&&Re.track_pageview&&(de=null,a.track_pageview.apply(a,Re.track_pageview),Re.track_pageview=null)}),1)):ct(l.ERROR,"add_consent, No feature available for ["+e+"]")},this.remove_consent=function(e){ct(l.INFO,"remove_consent, Removing consent for ["+e+"]"),this.remove_consent_internal(e,!0)},this.remove_consent_internal=function(e,t){if(t=t||!1,Array.isArray(e))for(var i=0;i<e.length;i++)this.remove_consent_internal(e[i],t);else We[e]?We[e].features?this.remove_consent_internal(We[e].features,t):(We[e].optin=!1,t&&!1!==We[e].optin&&Me()):ct(l.WARNING,"remove_consent, No feature available for ["+e+"]")};var Me=function(){Fe&&(clearTimeout(Fe),Fe=null),Fe=setTimeout((function(){for(var e={},t=0;t<y.features.length;t++)!0===We[y.features[t]].optin?e[y.features[t]]=!0:e[y.features[t]]=!1;et({consent:JSON.stringify(e)}),ct(l.DEBUG,"Consent update request has been sent to the queue.")}),1e3)};function ze(e,t){if(a.ignore_visitor)ct(l.ERROR,"Adding event failed. Possible bot or user opt out");else if(e.key){e.count||(e.count=1),d.includes(e.key)||(e.key=L(e.key,a.maxKeyLength,"add_cly_event",ct)),e.segmentation=C(e.segmentation,a.maxKeyLength,a.maxValueSize,a.maxSegmentationValues,"add_cly_event",ct);var i=T(e,["key","count","sum","dur","segmentation"]);i.timestamp=O();var n=new Date;i.hour=n.getHours(),i.dow=n.getDay(),i.id=t||w(),i.key===c.VIEW?i.pvid=Le||"":i.cvid=Ce||"",te.push(i),Rt("cly_event",te),ct(l.INFO,"With event ID: ["+i.id+"], successfully adding the last event:",i)}else ct(l.ERROR,"Adding event failed. Event must have a key property")}this.enable_offline_mode=function(){ct(l.INFO,"enable_offline_mode, Enabling offline mode"),this.remove_consent_internal(y.features,!1),ke=!0,this.device_id="[CLY]_temp_id",a.device_id=this.device_id,xe=u.TEMPORARY_ID},this.disable_offline_mode=function(e){if(ke){ct(l.INFO,"disable_offline_mode, Disabling offline mode"),ke=!1,e&&this.device_id!==e?(this.device_id=e,a.device_id=this.device_id,xe=u.DEVELOPER_SUPPLIED,Rt("cly_id",this.device_id),Rt("cly_id_type",u.DEVELOPER_SUPPLIED),ct(l.INFO,"disable_offline_mode, Changing id to: "+this.device_id)):(this.device_id=nt(),"[CLY]_temp_id"===this.device_id&&(this.device_id=E()),a.device_id=this.device_id,this.device_id!==kt("cly_id")&&(Rt("cly_id",this.device_id),Rt("cly_id_type",u.SDK_GENERATED)));var t=!1;if(ee.length>0)for(var i=0;i<ee.length;i++)"[CLY]_temp_id"===ee[i].device_id&&(ee[i].device_id=this.device_id,t=!0);t&&Rt("cly_queue",ee,!0)}else ct(l.WARNING,"disable_offline_mode, Countly was not in offline mode.")},this.begin_session=function(e,t){if(ct(l.INFO,"begin_session, Starting the session. There was an ongoing session: ["+p+"]"),e&&ct(l.INFO,"begin_session, Heartbeats are disabled"),t&&ct(l.INFO,"begin_session, Session starts irrespective of session cookie"),this.check_consent(s.SESSIONS)){if(!p){this.enableOrientationTracking&&(this.report_orientation(),G(window,"resize",(function(){a.report_orientation()}))),r=R(),p=!0,se=!e;var i=kt("cly_session");if(ct(l.VERBOSE,"begin_session, Session state, forced: ["+t+"], useSessionCookie: ["+ye+"], seconds to expire: ["+(i-r)+"], expired: ["+(parseInt(i)<=R())+"] "),t||!ye||!i||parseInt(i)<=R()){ct(l.INFO,"begin_session, Session started"),null===Ne&&(Ne=!0);var n={begin_session:1};n.metrics=JSON.stringify(ot()),et(n)}Rt("cly_session",R()+60*be)}}else Re.begin_session=arguments},this.session_duration=function(e){ct(l.INFO,"session_duration, Reporting session duration"),this.check_consent(s.SESSIONS)&&p&&(ct(l.INFO,"session_duration, Session extended: ",e),et({session_duration:e}),$e())},this.end_session=function(e,t){ct(l.INFO,"end_session, Ending the current session. There was an on going session:["+p+"]"),this.check_consent(s.SESSIONS)&&p&&(e=e||R()-r,Xe(),!ye||t?(ct(l.INFO,"end_session, Session ended"),et({end_session:1,session_duration:e})):this.session_duration(e),p=!1)},this.change_id=function(e,t){if(ct(l.INFO,"change_id, Changing the ID"),t&&ct(l.INFO,"change_id, Will merge the IDs"),e&&"string"==typeof e&&0!==e.length){if(ke)return ct(l.WARNING,"change_id, Offline mode was on, initiating disabling sequence instead."),void this.disable_offline_mode(e);if(this.device_id!=e){t||(it(),Ke(),this.end_session(null,!0),re={},this.remove_consent_internal(y.features,!1));var i=this.device_id;this.device_id=e,a.device_id=this.device_id,xe=u.DEVELOPER_SUPPLIED,Rt("cly_id",this.device_id),Rt("cly_id_type",u.DEVELOPER_SUPPLIED),ct(l.INFO,"change_id, Changing ID from:["+i+"] to ["+e+"]"),t?et({old_device_id:i}):this.begin_session(!se,!0),this.remote_config&&(Rt("cly_remote_configs",ie={}),this.fetch_remote_config(this.remote_config))}}else ct(l.ERROR,"change_id, The provided ID: ["+e+"] is not a valid ID")},this.add_event=function(e){ct(l.INFO,"add_event, Adding event: ",e);var t=!1;switch(e.key){case c.NPS:case c.SURVEY:t=this.check_consent(s.FEEDBACK);break;case c.STAR_RATING:t=this.check_consent(s.STAR_RATING);break;case c.VIEW:t=this.check_consent(s.VIEWS);break;case c.ORIENTATION:t=this.check_consent(s.USERS);break;case c.ACTION:t=this.check_consent(s.CLICKS)||this.check_consent(s.SCROLLS);break;default:t=this.check_consent(s.EVENTS)}t&&ze(e)},this.start_event=function(e){e&&"string"==typeof e?(ct(l.INFO,"start_event, Starting timed event with key: ["+e+"]"),e=L(e,a.maxKeyLength,"start_event",ct),re[e]?ct(l.WARNING,"start_event, Timed event with key: ["+e+"] already started"):re[e]=R()):ct(l.WARNING,"start_event, you have to provide a valid string key instead of: ["+e+"]")},this.cancel_event=function(e){return e&&"string"==typeof e?(ct(l.INFO,"cancel_event, Canceling timed event with key: ["+e+"]"),e=L(e,a.maxKeyLength,"cancel_event",ct),re[e]?(delete re[e],ct(l.INFO,"cancel_event, Timed event with key: ["+e+"] is canceled"),!0):(ct(l.WARNING,"cancel_event, Timed event with key: ["+e+"] was not found"),!1)):(ct(l.WARNING,"cancel_event, you have to provide a valid string key instead of: ["+e+"]"),!1)},this.end_event=function(e){e?(ct(l.INFO,"end_event, Ending timed event"),"string"==typeof e&&(e={key:e=L(e,a.maxKeyLength,"end_event",ct)}),e.key?re[e.key]?(e.dur=R()-re[e.key],this.add_event(e),delete re[e.key]):ct(l.ERROR,"end_event, Timed event with key: ["+e.key+"] was not started"):ct(l.ERROR,"end_event, Timed event must have a key property")):ct(l.WARNING,"end_event, you have to provide a valid string key or event object instead of: ["+e+"]")},this.report_orientation=function(e){ct(l.INFO,"report_orientation, Reporting orientation"),this.check_consent(s.USERS)&&ze({key:c.ORIENTATION,segmentation:{mode:e||H()}})},this.report_conversion=function(e,t){ct(l.WARNING,"report_conversion, Deprecated function call! Use 'recordDirectAttribution' in place of this call. Call will be redirected now!"),this.recordDirectAttribution(e,t)},this.recordDirectAttribution=function(e,t){ct(l.INFO,"recordDirectAttribution, Recording the attribution for campaign ID: ["+e+"] and the user ID: ["+t+"]"),this.check_consent(s.ATTRIBUTION)&&(e=e||kt("cly_cmp_id")||"cly_organic",et((t=t||kt("cly_cmp_uid"))?{campaign_id:e,campaign_user:t}:{campaign_id:e}))},this.user_details=function(e){if(ct(l.INFO,"user_details, Trying to add user details: ",e),this.check_consent(s.USERS)){it(),Ke(),ct(l.INFO,"user_details, flushed the event queue"),e.name=L(e.name,a.maxValueSize,"user_details",ct),e.username=L(e.username,a.maxValueSize,"user_details",ct),e.email=L(e.email,a.maxValueSize,"user_details",ct),e.organization=L(e.organization,a.maxValueSize,"user_details",ct),e.phone=L(e.phone,a.maxValueSize,"user_details",ct),e.picture=L(e.picture,4096,"user_details",ct),e.gender=L(e.gender,a.maxValueSize,"user_details",ct),e.byear=L(e.byear,a.maxValueSize,"user_details",ct),e.custom=C(e.custom,a.maxKeyLength,a.maxValueSize,a.maxSegmentationValues,"user_details",ct);var t=["name","username","email","organization","phone","picture","gender","byear","custom"];et({user_details:JSON.stringify(T(e,t))})}};var Ve={},je=function(e,t,i){a.check_consent(s.USERS)&&(Ve[e]||(Ve[e]={}),"$push"===i||"$pull"===i||"$addToSet"===i?(Ve[e][i]||(Ve[e][i]=[]),Ve[e][i].push(t)):Ve[e][i]=t)};function qe(e,t,i,n,r){ct(l.INFO,"fetch_remote_config_explicit, Fetching sequence initiated");var o,c={method:"rc",av:a.app_version};e&&(c.keys=JSON.stringify(e)),t&&(c.omit_keys=JSON.stringify(t)),"legacy"===n&&(c.method="fetch_remote_config"),0===i&&(c.oi=0),1===i&&(c.oi=1),"function"==typeof r&&(o=r),a.check_consent(s.SESSIONS)&&(c.metrics=JSON.stringify(ot())),a.check_consent(s.REMOTE_CONFIG)?(Ze(c),dt("fetch_remote_config_explicit",a.url+S,c,(function(e,t,i){if(!e){try{var n=JSON.parse(i);if(c.keys||c.omit_keys)for(var r in n)ie[r]=n[r];else ie=n;Rt("cly_remote_configs",ie)}catch(e){ct(l.ERROR,"fetch_remote_config_explicit, Had an issue while parsing the response: "+e)}o&&(ct(l.INFO,"fetch_remote_config_explicit, Callback function is provided"),o(e,ie))}}),!0)):(ct(l.ERROR,"fetch_remote_config_explicit, Remote config requires explicit consent"),o&&o(new Error("Remote config requires explicit consent"),ie))}function He(){ct(l.INFO,"checkIgnore, Checking if user or visit should be ignored"),a.ignore_prefetch&&v&&void 0!==document.visibilityState&&"prerender"===document.visibilityState&&(a.ignore_visitor=!0,ct(l.DEBUG,"checkIgnore, Ignoring visit due to prerendering")),a.ignore_bots&&M()&&(a.ignore_visitor=!0,ct(l.DEBUG,"checkIgnore, Ignoring visit due to bot"))}function Ke(){te.length>0&&(ct(l.DEBUG,"Flushing events"),et({events:JSON.stringify(te)}),Rt("cly_event",te=[]))}function Je(e,t){if(v)if(document.getElementById("countly-feedback-sticker-"+e._id))ct(l.ERROR,"Widget with same ID exists");else try{var i=document.createElement("div");i.className="countly-iframe-wrapper",i.id="countly-iframe-wrapper-"+e._id;var n=document.createElement("span");n.className="countly-feedback-close-icon",n.id="countly-feedback-close-icon-"+e._id,n.innerText="x";var r=document.createElement("iframe");if(r.name="countly-feedback-iframe",r.id="countly-feedback-iframe",r.src=a.url+"/feedback?widget_id="+e._id+"&app_key="+a.app_key+"&device_id="+a.device_id+"&sdk_version="+Pe,document.body.appendChild(i),i.appendChild(n),i.appendChild(r),G(document.getElementById("countly-feedback-close-icon-"+e._id),"click",(function(){document.getElementById("countly-iframe-wrapper-"+e._id).style.display="none",document.getElementById("cfbg").style.display="none"})),t){var o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.id="feedback-sticker-svg",o.setAttribute("aria-hidden","true"),o.setAttribute("data-prefix","far"),o.setAttribute("data-icon","grin"),o.setAttribute("class","svg-inline--fa fa-grin fa-w-16"),o.setAttribute("role","img"),o.setAttribute("xmlns","http://www.w3.org/2000/svg"),o.setAttribute("viewBox","0 0 496 512");var s=document.createElementNS("http://www.w3.org/2000/svg","path");s.id="smileyPathInStickerSvg",s.setAttribute("fill","white"),s.setAttribute("d","M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 448c-110.3 0-200-89.7-200-200S137.7 56 248 56s200 89.7 200 200-89.7 200-200 200zm105.6-151.4c-25.9 8.3-64.4 13.1-105.6 13.1s-79.6-4.8-105.6-13.1c-9.9-3.1-19.4 5.4-17.7 15.3 7.9 47.1 71.3 80 123.3 80s115.3-32.9 123.3-80c1.6-9.8-7.7-18.4-17.7-15.3zM168 240c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32zm160 0c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32z");var c=document.createElement("span");c.innerText=e.trigger_button_text;var d=document.createElement("div");d.style.color=e.trigger_font_color.length<7?"#"+e.trigger_font_color:e.trigger_font_color,d.style.backgroundColor=e.trigger_bg_color.length<7?"#"+e.trigger_bg_color:e.trigger_bg_color,d.className="countly-feedback-sticker  "+e.trigger_position+"-"+e.trigger_size,d.id="countly-feedback-sticker-"+e._id,o.appendChild(s),d.appendChild(o),d.appendChild(c),document.body.appendChild(d);var u=document.getElementById("smileyPathInStickerSvg");u&&(u.style.fill=e.trigger_font_color.length<7?"#"+e.trigger_font_color:e.trigger_font_color),G(document.getElementById("countly-feedback-sticker-"+e._id),"click",(function(){document.getElementById("countly-iframe-wrapper-"+e._id).style.display="block",document.getElementById("cfbg").style.display="block"}))}else document.getElementById("countly-iframe-wrapper-"+e._id).style.display="block",document.getElementById("cfbg").style.display="block"}catch(e){ct(l.ERROR,"Somethings went wrong while element injecting process: "+e)}else ct(l.WARNING,"processWidget, window object is not available. Not processing widget.")}function Ye(){var e;if(void 0!==a.onload&&a.onload.length>0){for(e=0;e<a.onload.length;e++)"function"==typeof a.onload[e]&&a.onload[e](a);a.onload=[]}}function Xe(){if(de){var e={name:de};a.check_consent(s.VIEWS)&&(ze({key:c.VIEW,dur:Se?R()-le:ue,segmentation:e},Ce),de=null)}}function Qe(){return de}function $e(){if(ye){var e=kt("cly_session");(!e||parseInt(e)<=R())&&(p=!1,a.begin_session(!se)),Rt("cly_session",R()+60*be)}}function Ze(e){e.app_key=a.app_key,e.device_id=a.device_id,e.sdk_name=Ge,e.sdk_version=Pe,e.t=xe,e.av=a.app_version;var t=at();if(e.metrics){var i=JSON.parse(e.metrics);i._ua||(i._ua=t,e.metrics=JSON.stringify(i))}else e.metrics=JSON.stringify({_ua:t});a.check_consent(s.LOCATION)?(a.country_code&&(e.country_code=a.country_code),a.city&&(e.city=a.city),null!==a.ip_address&&(e.ip_address=a.ip_address)):e.location="",e.timestamp=O();var n=new Date;e.hour=n.getHours(),e.dow=n.getDay()}function et(e){a.ignore_visitor?ct(l.WARNING,"User is opt_out will ignore the request: "+e):a.app_key&&a.device_id?(Ze(e),ee.length>Z&&ee.shift(),ee.push(e),Rt("cly_queue",ee,!0)):ct(l.ERROR,"app_key or device_id is missing ",a.app_key,a.device_id)}function tt(){if(Ye(),a.ignore_visitor)return Ee=!1,void ct(l.WARNING,"User opt_out, no heartbeat");if(Ee=!0,o&&void 0!==y.q&&y.q.length>0&&it(),p&&se&&Se){var e=R();e-r>_e&&(a.session_duration(e-r),r=e,a.hcErrorCount>0&&Rt(g.errorCount,a.hcErrorCount),a.hcWarningCount>0&&Rt(g.warningCount,a.hcWarningCount))}if(te.length>0&&!a.test_mode_eq){if(te.length<=me)et({events:JSON.stringify(te)}),te=[];else{var t=te.splice(0,me);et({events:JSON.stringify(t)})}Rt("cly_event",te)}if(!ke&&ee.length>0&&we&&R()>fe){we=!1;var i=ee[0];i.rr=ee.length,ct(l.DEBUG,"Processing request",i),Rt("cly_queue",ee,!0),a.test_mode||dt("send_request_queue",a.url+k,i,(function(e,t){e?fe=R()+pe:ee.shift(),Rt("cly_queue",ee,!0),we=!0}),!1)}setTimeout(tt,K)}function it(){var e=y.q;y.q=[];for(var t=0;t<e.length;t++){var i=e[t];if(ct(l.DEBUG,"Processing queued calls:"+i),"function"==typeof i)i();else if(Array.isArray(i)&&i.length>0){var n=a,r=0;try{y.i[i[r]]&&(n=y.i[i[r]],r++)}catch(e){ct(l.DEBUG,"No instance found for the provided key while processing async queue")}if("function"==typeof n[i[r]])n[i[r]].apply(n,i.slice(r+1));else if(0===i[r].indexOf("userData.")){var o=i[r].replace("userData.","");"function"==typeof n.userData[o]&&n.userData[o].apply(n,i.slice(r+1))}else"function"==typeof y[i[r]]&&y[i[r]].apply(y,i.slice(r+1))}}}function nt(){var e=kt("cly_id");return e?(xe=kt("cly_id_type"),e):E()}function rt(e){return/[0-9a-fA-F]{8}\-[0-9a-fA-F]{4}\-4[0-9a-fA-F]{3}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{12}/.test(e)}function at(){return a.metrics._ua||F()}function ot(){var e=JSON.parse(JSON.stringify(a.metrics||{}));if(e._app_version=e._app_version||a.app_version,e._ua=e._ua||F(),v&&screen.width){var t=screen.width?parseInt(screen.width):0,i=screen.height?parseInt(screen.height):0;if(0!==t&&0!==i){if(navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)&&window.devicePixelRatio)t=Math.round(t*window.devicePixelRatio),i=Math.round(i*window.devicePixelRatio);else if(90===Math.abs(window.orientation)){var n=t;t=i,i=n}e._resolution=e._resolution||t+"x"+i}}v&&window.devicePixelRatio&&(e._density=e._density||window.devicePixelRatio);var r=navigator.language||navigator.browserLanguage||navigator.systemLanguage||navigator.userLanguage;return void 0!==r&&(e._locale=e._locale||r),st()&&(e._store=e._store||document.referrer),ct(l.DEBUG,"Got metrics",e),e}function st(e){if(!v)return!1;var t=e||document.referrer,i=!1;if(void 0===t||0===t.length)ct(l.DEBUG,"Invalid referrer:["+t+"], ignoring.");else{var n=m.exec(t);if(n)if(n[11])if(n[11]===window.location.hostname)ct(l.DEBUG,"Referrer is current host:["+t+"], ignoring.");else if(ae&&ae.length){i=!0;for(var r=0;r<ae.length;r++)if(t.indexOf(ae[r])>=0){ct(l.DEBUG,"Referrer in ignore list:["+t+"], ignoring."),i=!1;break}}else ct(l.DEBUG,"Valid referrer:["+t+"]"),i=!0;else ct(l.DEBUG,"No path found in referrer:["+t+"], ignoring.");else ct(l.DEBUG,"Referrer is corrupt:["+t+"], ignoring.")}return i}function ct(e,i){if(a.debug&&"undefined"!=typeof console){arguments[2]&&"object"===t(arguments[2])&&(arguments[2]=JSON.stringify(arguments[2])),o||(i="["+a.app_key+"] "+i),e||(e=l.DEBUG);for(var n="",r=2;r<arguments.length;r++)n+=arguments[r];var s=e+"[Countly] "+i+n;e===l.ERROR?(console.error(s),It.incrementErrorCount()):e===l.WARNING?(console.warn(s),It.incrementWarningCount()):e===l.INFO?console.info(s):e===l.VERBOSE?console.log(s):console.debug(s)}}function dt(e,t,i,n,r){v?lt(e,t,i,n,r):ut(e,t,i,n,r)}function lt(e,t,i,n,r){r=r||!1;try{ct(l.DEBUG,"Sending XML HTTP request");var o=new XMLHttpRequest,s=x(i=i||{}),c="GET";for(var d in(a.force_post||s.length>=2e3)&&(c="POST"),"GET"===c?o.open("GET",t+"?"+s,!0):(o.open("POST",t,!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded")),a.headers)o.setRequestHeader(d,a.headers[d]);o.onreadystatechange=function(){4===this.readyState&&(ct(l.DEBUG,e+" HTTP request completed with status code: ["+this.status+"] and response: ["+this.responseText+"]"),(r?pt(this.status,this.responseText):ft(this.status,this.responseText))?"function"==typeof n&&n(!1,i,this.responseText):(ct(l.ERROR,e+" Invalid response from server"),"send_request_queue"===e&&It.saveRequestCounters(this.status,this.responseText),"function"==typeof n&&n(!0,i,this.status,this.responseText)))},"GET"===c?o.send():o.send(s)}catch(t){ct(l.ERROR,e+" Something went wrong while making an XML HTTP request: "+t),"function"==typeof n&&n(!0,i)}}function ut(e,t,i,n,r){var o;r=r||!1;try{ct(l.DEBUG,"Sending Fetch request");var s="GET",c={"Content-type":"application/x-www-form-urlencoded"},d=null;for(var u in i=i||{},a.force_post||x(i).length>=2e3?(s="POST",d=x(i)):t+="?"+x(i),a.headers)c[u]=a.headers[u];fetch(t,{method:s,headers:c,body:d}).then((function(e){return(o=e).text()})).then((function(t){ct(l.DEBUG,e+" Fetch request completed wit status code: ["+o.status+"] and response: ["+t+"]"),(r?pt(o.status,t):ft(o.status,t))?"function"==typeof n&&n(!1,i,t):(ct(l.ERROR,e+" Invalid response from server"),"send_request_queue"===e&&It.saveRequestCounters(o.status,t),"function"==typeof n&&n(!0,i,o.status,t))})).catch((function(t){ct(l.ERROR,e+" Failed Fetch request: "+t),"function"==typeof n&&n(!0,i)}))}catch(t){ct(l.ERROR,e+" Something went wrong with the Fetch request attempt: "+t),"function"==typeof n&&n(!0,i)}}function ft(e,t){if(!(e>=200&&e<300))return ct(l.ERROR,"Http response status code:["+e+"] is not within the expected range"),!1;try{var i=JSON.parse(t);return"[object Object]"!==Object.prototype.toString.call(i)?(ct(l.ERROR,"Http response is not JSON Object"),!1):!!i.result}catch(e){return ct(l.ERROR,"Http response is not JSON: "+e),!1}}function pt(e,t){if(!(e>=200&&e<300))return ct(l.ERROR,"Http response status code:["+e+"] is not within the expected range"),!1;try{var i=JSON.parse(t);return!("[object Object]"!==Object.prototype.toString.call(i)&&!Array.isArray(i)&&(ct(l.ERROR,"Http response is not JSON Object nor JSON Array"),1))}catch(e){return ct(l.ERROR,"Http response is not JSON: "+e),!1}}function gt(){v?Te=Math.max(Te,window.scrollY,document.body.scrollTop,document.documentElement.scrollTop):ct(l.WARNING,"processScroll, window object is not available. Not processing scroll.")}function ht(){if(v){if(Ae){Ae=!1;var e=V(),t=j(),i=q();if(a.check_consent(s.SCROLLS)){var n={type:"scroll",y:Te+i,width:t,height:e,view:a.getViewUrl()};n=C(n,a.maxKeyLength,a.maxValueSize,a.maxSegmentationValues,"processScrollView",ct),a.track_domains&&(n.domain=window.location.hostname),ze({key:c.ACTION,segmentation:n})}}}else ct(l.WARNING,"processScrollView, window object is not available. Not processing scroll view.")}function _t(){return xe}function mt(e){Rt("cly_token",e)}function vt(){var e=kt("cly_token");return St("cly_token"),e}function yt(){return te}function bt(){return ee}function wt(e){for(var t=e+"=",i=document.cookie.split(";"),n=0,r=i.length;n<r;n++){for(var a=i[n];" "===a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(t))return a.substring(t.length,a.length)}return null}function Et(e,t,i){var n=new Date;n.setTime(n.getTime()+24*i*60*60*1e3);var r="; expires="+n.toGMTString();document.cookie=e+"="+t+r+"; path=/"}function kt(e,i,n){var r;if("none"!==a.storage&&("object"===t(a.storage)||v))return n||(e=a.app_key+"/"+e,a.namespace&&(e=A(a.namespace)+"/"+e)),"object"===t(a.storage)&&"function"==typeof a.storage.getItem?(r=a.storage.getItem(e),e.endsWith("cly_id")?r:a.deserialize(r)):(void 0===i&&(i=Ie),i?r=localStorage.getItem(e):"localstorage"!==a.storage&&(r=wt(e)),e.endsWith("cly_id")?r:a.deserialize(r));ct(l.DEBUG,"Storage is disabled. Value with key: ["+e+"] won't be retrieved")}function Rt(e,i,n,r){if("none"===a.storage||"object"!==t(a.storage)&&!v)ct(l.DEBUG,"Storage is disabled. Value with key: "+e+" won't be stored");else if(r||(e=a.app_key+"/"+e,a.namespace&&(e=A(a.namespace)+"/"+e)),null!=i){if("object"===t(a.storage)&&"function"==typeof a.storage.setItem)return void a.storage.setItem(e,i);void 0===n&&(n=Ie),i=a.serialize(i),n?localStorage.setItem(e,i):"localstorage"!==a.storage&&Et(e,i,30)}}function St(e,i,n){"none"===a.storage||"object"!==t(a.storage)&&!v?ct(l.DEBUG,"Storage is disabled. Value with key: "+e+" won't be removed"):(n||(e=a.app_key+"/"+e,a.namespace&&(e=A(a.namespace)+"/"+e)),"object"!==t(a.storage)||"function"!=typeof a.storage.removeItem?(void 0===i&&(i=Ie),i?localStorage.removeItem(e):"localstorage"!==a.storage&&Et(e,"",-1)):a.storage.removeItem(e))}function Ot(){if(kt(a.namespace+"cly_id",!1,!0)){Rt("cly_id",kt(a.namespace+"cly_id",!1,!0)),Rt("cly_id_type",kt(a.namespace+"cly_id_type",!1,!0)),Rt("cly_event",kt(a.namespace+"cly_event",!1,!0)),Rt("cly_session",kt(a.namespace+"cly_session",!1,!0));var e=kt(a.namespace+"cly_queue",!1,!0);Array.isArray(e)&&Rt("cly_queue",e=e.filter((function(e){return e.app_key===a.app_key}))),kt(a.namespace+"cly_cmp_id",!1,!0)&&(Rt("cly_cmp_id",kt(a.namespace+"cly_cmp_id",!1,!0)),Rt("cly_cmp_uid",kt(a.namespace+"cly_cmp_uid",!1,!0))),kt(a.namespace+"cly_ignore",!1,!0)&&Rt("cly_ignore",kt(a.namespace+"cly_ignore",!1,!0)),St("cly_id",!1,!0),St("cly_id_type",!1,!0),St("cly_event",!1,!0),St("cly_session",!1,!0),St("cly_queue",!1,!0),St("cly_cmp_id",!1,!0),St("cly_cmp_uid",!1,!0),St("cly_ignore",!1,!0)}}this.userData={set:function(e,t){ct(l.INFO,"[userData] set, Setting user's custom property value: ["+t+"] under the key: ["+e+"]"),e=L(e,a.maxKeyLength,"userData set",ct),t=L(t,a.maxValueSize,"userData set",ct),Ve[e]=t},unset:function(e){ct(l.INFO,"[userData] unset, Resetting user's custom property with key: ["+e+"] "),Ve[e]=""},set_once:function(e,t){ct(l.INFO,"[userData] set_once, Setting user's unique custom property value: ["+t+"] under the key: ["+e+"] "),e=L(e,a.maxKeyLength,"userData set_once",ct),t=L(t,a.maxValueSize,"userData set_once",ct),je(e,t,"$setOnce")},increment:function(e){ct(l.INFO,"[userData] increment, Increasing user's custom property value under the key: ["+e+"] by one"),e=L(e,a.maxKeyLength,"userData increment",ct),je(e,1,"$inc")},increment_by:function(e,t){ct(l.INFO,"[userData] increment_by, Increasing user's custom property value under the key: ["+e+"] by: ["+t+"]"),e=L(e,a.maxKeyLength,"userData increment_by",ct),t=L(t,a.maxValueSize,"userData increment_by",ct),je(e,t,"$inc")},multiply:function(e,t){ct(l.INFO,"[userData] multiply, Multiplying user's custom property value under the key: ["+e+"] by: ["+t+"]"),e=L(e,a.maxKeyLength,"userData multiply",ct),t=L(t,a.maxValueSize,"userData multiply",ct),je(e,t,"$mul")},max:function(e,t){ct(l.INFO,"[userData] max, Saving user's maximum custom property value compared to the value: ["+t+"] under the key: ["+e+"]"),e=L(e,a.maxKeyLength,"userData max",ct),t=L(t,a.maxValueSize,"userData max",ct),je(e,t,"$max")},min:function(e,t){ct(l.INFO,"[userData] min, Saving user's minimum custom property value compared to the value: ["+t+"] under the key: ["+e+"]"),e=L(e,a.maxKeyLength,"userData min",ct),t=L(t,a.maxValueSize,"userData min",ct),je(e,t,"$min")},push:function(e,t){ct(l.INFO,"[userData] push, Pushing a value: ["+t+"] under the key: ["+e+"] to user's custom property array"),e=L(e,a.maxKeyLength,"userData push",ct),t=L(t,a.maxValueSize,"userData push",ct),je(e,t,"$push")},push_unique:function(e,t){ct(l.INFO,"[userData] push_unique, Pushing a unique value: ["+t+"] under the key: ["+e+"] to user's custom property array"),e=L(e,a.maxKeyLength,"userData push_unique",ct),t=L(t,a.maxValueSize,"userData push_unique",ct),je(e,t,"$addToSet")},pull:function(e,t){ct(l.INFO,"[userData] pull, Removing the value: ["+t+"] under the key: ["+e+"] from user's custom property array"),je(e,t,"$pull")},save:function(){ct(l.INFO,"[userData] save, Saving changes to user's custom property"),a.check_consent(s.USERS)&&(it(),Ke(),ct(l.INFO,"user_details, flushed the event queue"),et({user_details:JSON.stringify({custom:Ve})})),Ve={}}},this.report_trace=function(e){if(ct(l.INFO,"report_trace, Reporting performance trace"),this.check_consent(s.APM)){for(var t=["type","name","stz","etz","apm_metrics","apm_attr"],i=0;i<t.length;i++)if("apm_attr"!==t[i]&&void 0===e[t[i]])return void ct(l.WARNING,"report_trace, APM trace don't have the property: "+t[i]);e.name=L(e.name,a.maxKeyLength,"report_trace",ct),e.app_metrics=C(e.app_metrics,a.maxKeyLength,a.maxValueSize,a.maxSegmentationValues,"report_trace",ct);var n=T(e,t);n.timestamp=e.stz;var r=new Date;n.hour=r.getHours(),n.dow=r.getDay(),et({apm:JSON.stringify(n)}),ct(l.INFO,"report_trace, Successfully adding APM trace: ",n)}},this.track_errors=function(e){v?(ct(l.INFO,"track_errors, Started tracking errors"),y.i[this.app_key].tracking_crashes=!0,window.cly_crashes||(window.cly_crashes=!0,oe=e,window.onerror=function e(t,i,n,r,a){if(null!=a)N(a,!1);else{var o="";void 0!==t&&(o+=t+"\n"),void 0!==i&&(o+="at "+i),void 0!==n&&(o+=":"+n),void 0!==(r=r||window.event&&window.event.errorCharacter)&&(o+=":"+r),o+="\n";try{for(var s=[],c=e.caller;c;)s.push(c.name),c=c.caller;o+=s.join("\n")}catch(e){ct(l.ERROR,"track_errors, Call stack generation experienced a problem: "+e)}N(o,!1)}},window.addEventListener("unhandledrejection",(function(e){N(new Error("Unhandled rejection (reason: "+(e.reason&&e.reason.stack?e.reason.stack:e.reason)+")."),!0)})))):ct(l.WARNING,"track_errors, window object is not available. Not tracking errors.")},this.log_error=function(e,t){ct(l.INFO,"log_error, Logging errors"),this.recordError(e,!0,t)},this.add_log=function(e){if(ct(l.INFO,"add_log, Adding a new log of breadcrumbs: [ "+e+" ]"),this.check_consent(s.CRASHES)){for(e=L(e,a.maxValueSize,"add_log",ct);ne.length>=a.maxBreadcrumbCount;)ne.shift(),ct(l.WARNING,"add_log, Reached maximum crashLogs size. Will erase the oldest one.");ne.push(e)}},this.fetch_remote_config=function(e,t,i){var n=null,r=null,a=null;if(e&&(i||"function"!=typeof e?Array.isArray(e)&&(n=e):a=e),t&&(i||"function"!=typeof t?Array.isArray(t)&&(r=t):a=t),a||"function"!=typeof i||(a=i),this.useExplicitRcApi)return ct(l.INFO,"fetch_remote_config, Fetching remote config"),void qe(n,r,this.rcAutoOptinAb?1:0,null,a);ct(l.WARNING,"fetch_remote_config, Fetching remote config, with legacy API"),qe(n,r,null,"legacy",a)},this.enrollUserToAb=function(e){if(ct(l.INFO,"enrollUserToAb, Providing AB test keys to opt in for"),e&&Array.isArray(e)&&0!==e.length){var t={method:"ab",keys:JSON.stringify(e),av:a.app_version};Ze(t),dt("enrollUserToAb",this.url+S,t,(function(e,t,i){if(!e)try{var n=JSON.parse(i);ct(l.DEBUG,"enrollUserToAb, Parsed the response's result: ["+n.result+"]")}catch(e){ct(l.ERROR,"enrollUserToAb, Had an issue while parsing the response: "+e)}}),!0)}else ct(l.ERROR,"enrollUserToAb, No keys provided")},this.get_remote_config=function(e){return ct(l.INFO,"get_remote_config, Getting remote config from storage"),void 0!==e?ie[e]:ie},this.stop_time=function(){ct(l.INFO,"stop_time, Stopping tracking duration"),Se&&(Se=!1,ce=R()-r,ue=R()-le)},this.start_time=function(){ct(l.INFO,"start_time, Starting tracking duration"),Se||(Se=!0,r=R()-ce,le=R()-ue,ue=0,$e())},this.track_sessions=function(){if(v){ct(l.INFO,"track_session, Starting tracking user session"),this.begin_session(),this.start_time(),G(window,"beforeunload",(function(){it(),Ke(),a.end_session()}));var e="hidden";G(window,"focus",t),G(window,"blur",t),G(window,"pageshow",t),G(window,"pagehide",t),"onfocusin"in document&&(G(window,"focusin",t),G(window,"focusout",t)),e in document?document.addEventListener("visibilitychange",t):"mozHidden"in document?(e="mozHidden",document.addEventListener("mozvisibilitychange",t)):"webkitHidden"in document?(e="webkitHidden",document.addEventListener("webkitvisibilitychange",t)):"msHidden"in document&&(e="msHidden",document.addEventListener("msvisibilitychange",t)),G(window,"mousemove",i),G(window,"click",i),G(window,"keydown",i),G(window,"scroll",i),setInterval((function(){++he>=ge&&a.stop_time()}),6e4)}else ct(l.WARNING,"track_sessions, window object is not available. Not tracking sessions.");function t(){document[e]||!document.hasFocus()?a.stop_time():a.start_time()}function i(){he>=ge&&a.start_time(),he=0}},this.track_pageview=function(e,t,i){if(v||e)if(ct(l.INFO,"track_pageview, Tracking page views"),ct(l.VERBOSE,"track_pageview, last view is:["+de+"], current view ID is:["+Ce+"], previous view ID is:["+Le+"]"),de&&De&&(ct(l.DEBUG,"track_pageview, Scroll registry triggered"),ht(),Ae=!0,Te=0),Xe(),Le=Ce,Ce=w(),(e=L(e,a.maxKeyLength,"track_pageview",ct))&&Array.isArray(e)&&(t=e,e=null),e||(e=this.getViewName()),void 0!==e&&""!==e)if(null!==e){if(t&&t.length)for(var n=0;n<t.length;n++)try{if(new RegExp(t[n]).test(e))return void ct(l.INFO,"track_pageview, Ignoring the page: "+e)}catch(e){ct(l.ERROR,"track_pageview, Problem with finding ignore list item: "+t[n]+", error: "+e)}de=e,le=R(),ct(l.VERBOSE,"track_pageview, last view is assigned:["+de+"], current view ID is:["+Ce+"], previous view ID is:["+Le+"]");var r={name:e,visit:1,view:a.getViewUrl()};if(r=C(r,a.maxKeyLength,a.maxValueSize,a.maxSegmentationValues,"track_pageview",ct),this.track_domains&&(r.domain=window.location.hostname),ye)if(p)Ne&&(Ne=!1,r.start=1);else{var o=kt("cly_session");(!o||parseInt(o)<=R())&&(Ne=!1,r.start=1)}else if(v&&void 0!==document.referrer&&document.referrer.length){var d=m.exec(document.referrer);d&&d[11]&&d[11]!==window.location.hostname&&(r.start=1)}if(Be&&Object.keys(Be).length)for(var u in ct(l.INFO,"track_pageview, Adding fresh utm tags to segmentation:["+JSON.stringify(Be)+"]"),Be)void 0===r["utm_"+u]&&(r["utm_"+u]=Be[u]);if(v&&st()&&(ct(l.INFO,"track_pageview, Adding referrer to segmentation:["+document.referrer+"]"),r.referrer=document.referrer),i)for(var f in i=C(i,a.maxKeyLength,a.maxValueSize,a.maxSegmentationValues,"track_pageview",ct))void 0===r[f]&&(r[f]=i[f]);this.check_consent(s.VIEWS)?ze({key:c.VIEW,segmentation:r},Ce):Re.track_pageview=arguments}else ct(l.ERROR,"track_pageview, View name returned as null. Page view will be ignored.");else ct(l.ERROR,"track_pageview, No page name to track (it is either undefined or empty string). No page view can be tracked.");else ct(l.WARNING,"track_pageview, window object is not available. Not tracking page views is page is not provided.")},this.track_view=function(e,t,i){ct(l.INFO,"track_view, Initiating tracking page views"),this.track_pageview(e,t,i)},this.track_clicks=function(e){if(v){ct(l.INFO,"track_clicks, Starting to track clicks"),e&&ct(l.INFO,"track_clicks, Tracking the specified children:["+e+"]"),e=e||document;var t=!0;G(e,"click",i)}else ct(l.WARNING,"track_clicks, window object is not available. Not tracking clicks.");function i(e){if(t){if(t=!1,z(e),void 0!==e.pageX&&void 0!==e.pageY){var i=V(),n=j();if(a.check_consent(s.CLICKS)){var r={type:"click",x:e.pageX,y:e.pageY,width:n,height:i,view:a.getViewUrl()};r=C(r,a.maxKeyLength,a.maxValueSize,a.maxSegmentationValues,"processClick",ct),a.track_domains&&(r.domain=window.location.hostname),ze({key:c.ACTION,segmentation:r})}}setTimeout((function(){t=!0}),1e3)}}},this.track_scrolls=function(e){v?(ct(l.INFO,"track_scrolls, Starting to track scrolls"),e&&ct(l.INFO,"track_scrolls, Tracking the specified children"),e=e||window,Ae=!0,De=!0,G(e,"scroll",gt),G(e,"beforeunload",ht)):ct(l.WARNING,"track_scrolls, window object is not available. Not tracking scrolls.")},this.track_links=function(e){function t(e){var t=B(P(e),"a");t&&(z(e),a.check_consent(s.CLICKS)&&ze({key:"linkClick",segmentation:{href:t.href,text:t.innerText,id:t.id,view:a.getViewUrl()}}))}v?(ct(l.INFO,"track_links, Starting to track clicks to links"),e&&ct(l.INFO,"track_links, Tracking the specified children"),G(e=e||document,"click",t)):ct(l.WARNING,"track_links, window object is not available. Not tracking links.")},this.track_forms=function(e,t){function i(e){return e.name||e.id||e.type||e.nodeName}function n(e){var n,r=P(e),o={id:r.attributes.id&&r.attributes.id.nodeValue,name:r.attributes.name&&r.attributes.name.nodeValue,action:r.attributes.action&&r.attributes.action.nodeValue,method:r.attributes.method&&r.attributes.method.nodeValue,view:a.getViewUrl()};if(void 0!==r.elements){for(var c=0;c<r.elements.length;c++)(n=r.elements[c])&&"password"!==n.type&&-1===n.className.indexOf("cly_user_ignore")&&(void 0===o["input:"+i(n)]&&(o["input:"+i(n)]=[]),"select"===n.nodeName.toLowerCase()?void 0!==n.multiple?o["input:"+i(n)].push(b(n)):o["input:"+i(n)].push(n.options[n.selectedIndex].value):"input"===n.nodeName.toLowerCase()?void 0!==n.type?"checkbox"===n.type.toLowerCase()||"radio"===n.type.toLowerCase()?n.checked&&o["input:"+i(n)].push(n.value):("hidden"!==n.type.toLowerCase()||t)&&o["input:"+i(n)].push(n.value):o["input:"+i(n)].push(n.value):("textarea"===n.nodeName.toLowerCase()||void 0!==n.value)&&o["input:"+i(n)].push(n.value));for(var d in o)o[d]&&"function"==typeof o[d].join&&(o[d]=o[d].join(", "))}a.check_consent(s.FORMS)&&ze({key:"formSubmit",segmentation:o})}v?(ct(l.INFO,"track_forms, Starting to track form submissions. DOM object provided:["+!!e+"] Tracking hidden inputs :["+!!t+"]"),G(e=e||document,"submit",n)):ct(l.WARNING,"track_forms, window object is not available. Not tracking forms.")},this.collect_from_forms=function(e,t){function i(i){var n,r=P(i),o={},s=!1;if(void 0!==r.elements){var c,d,u={},f=e.getElementsByTagName("LABEL");for(c=0;c<f.length;c++)f[c].htmlFor&&""!==f[c].htmlFor&&(u[f[c].htmlFor]=f[c].innerText||f[c].textContent||f[c].innerHTML);for(c=0;c<r.elements.length;c++)if((n=r.elements[c])&&"password"!==n.type&&-1===n.className.indexOf("cly_user_ignore")){var p="";if("select"===n.nodeName.toLowerCase()?p=void 0!==n.multiple?b(n):n.options[n.selectedIndex].value:"input"===n.nodeName.toLowerCase()?(void 0===n.type||"checkbox"!==n.type.toLowerCase()&&"radio"!==n.type.toLowerCase()||n.checked)&&(p=n.value):("textarea"===n.nodeName.toLowerCase()||void 0!==n.value)&&(p=n.value),n.className&&-1!==n.className.indexOf("cly_user_")){var g=n.className.split(" ");for(d=0;d<g.length;d++)if(0===g[d].indexOf("cly_user_")){o[g[d].replace("cly_user_","")]=p,s=!0;break}}else n.type&&"email"===n.type.toLowerCase()||n.name&&-1!==n.name.toLowerCase().indexOf("email")||n.id&&-1!==n.id.toLowerCase().indexOf("email")||n.id&&u[n.id]&&-1!==u[n.id].toLowerCase().indexOf("email")||/[^@\s]+@[^@\s]+\.[^@\s]+/.test(p)?(o.email||(o.email=p),s=!0):n.name&&-1!==n.name.toLowerCase().indexOf("username")||n.id&&-1!==n.id.toLowerCase().indexOf("username")||n.id&&u[n.id]&&-1!==u[n.id].toLowerCase().indexOf("username")?(o.username||(o.username=p),s=!0):n.name&&(-1!==n.name.toLowerCase().indexOf("tel")||-1!==n.name.toLowerCase().indexOf("phone")||-1!==n.name.toLowerCase().indexOf("number"))||n.id&&(-1!==n.id.toLowerCase().indexOf("tel")||-1!==n.id.toLowerCase().indexOf("phone")||-1!==n.id.toLowerCase().indexOf("number"))||n.id&&u[n.id]&&(-1!==u[n.id].toLowerCase().indexOf("tel")||-1!==u[n.id].toLowerCase().indexOf("phone")||-1!==u[n.id].toLowerCase().indexOf("number"))?(o.phone||(o.phone=p),s=!0):n.name&&(-1!==n.name.toLowerCase().indexOf("org")||-1!==n.name.toLowerCase().indexOf("company"))||n.id&&(-1!==n.id.toLowerCase().indexOf("org")||-1!==n.id.toLowerCase().indexOf("company"))||n.id&&u[n.id]&&(-1!==u[n.id].toLowerCase().indexOf("org")||-1!==u[n.id].toLowerCase().indexOf("company"))?(o.organization||(o.organization=p),s=!0):(n.name&&-1!==n.name.toLowerCase().indexOf("name")||n.id&&-1!==n.id.toLowerCase().indexOf("name")||n.id&&u[n.id]&&-1!==u[n.id].toLowerCase().indexOf("name"))&&(o.name||(o.name=""),o.name+=p+" ",s=!0)}}s&&(ct(l.INFO,"collect_from_forms, Gathered user data",o),t?a.user_details({custom:o}):a.user_details(o))}v?(ct(l.INFO,"collect_from_forms, Starting to collect possible user data. DOM object provided:["+!!e+"] Submitting custom user property:["+!!t+"]"),G(e=e||document,"submit",i)):ct(l.WARNING,"collect_from_forms, window object is not available. Not collecting from forms.")},this.collect_from_facebook=function(e){v?"undefined"!=typeof FB&&FB&&FB.api?(ct(l.INFO,"collect_from_facebook, Starting to collect possible user data"),FB.api("/me",(function(t){var i={};if(t.name&&(i.name=t.name),t.email&&(i.email=t.email),"male"===t.gender?i.gender="M":"female"===t.gender&&(i.gender="F"),t.birthday){var n=t.birthday.split("/").pop();n&&4===n.length&&(i.byear=n)}if(t.work&&t.work[0]&&t.work[0].employer&&t.work[0].employer.name&&(i.organization=t.work[0].employer.name),e)for(var r in i.custom={},e){for(var o=e[r].split("."),s=t,c=0;c<o.length&&void 0!==(s=s[o[c]]);c++);void 0!==s&&(i.custom[r]=s)}a.user_details(i)}))):ct(l.ERROR,"collect_from_facebook, Facebook SDK is not available"):ct(l.WARNING,"collect_from_facebook, window object is not available. Not collecting from Facebook.")},this.opt_out=function(){ct(l.INFO,"opt_out, Opting out the user"),this.ignore_visitor=!0,Rt("cly_ignore",!0)},this.opt_in=function(){ct(l.INFO,"opt_in, Opting in the user"),Rt("cly_ignore",!1),this.ignore_visitor=!1,He(),this.ignore_visitor||Ee||tt()},this.report_feedback=function(e){ct(l.WARNING,"report_feedback, Deprecated function call! Use 'recordRatingWidgetWithID' or 'reportFeedbackWidgetManually' in place of this call. Call will be redirected to 'recordRatingWidgetWithID' now!"),this.recordRatingWidgetWithID(e)},this.recordRatingWidgetWithID=function(e){if(ct(l.INFO,"recordRatingWidgetWithID, Providing information about user with ID: [ "+e.widget_id+" ]"),this.check_consent(s.STAR_RATING))if(e.widget_id)if(e.rating){var t=["widget_id","contactMe","platform","app_version","rating","email","comment"],i={key:c.STAR_RATING,count:1,segmentation:{}};i.segmentation=T(e,t),i.segmentation.app_version||(i.segmentation.app_version=this.metrics._app_version||this.app_version),i.segmentation.rating>5?(ct(l.WARNING,"recordRatingWidgetWithID, You have entered a rating higher than 5. Changing it back to 5 now."),i.segmentation.rating=5):i.segmentation.rating<1&&(ct(l.WARNING,"recordRatingWidgetWithID, You have entered a rating lower than 1. Changing it back to 1 now."),i.segmentation.rating=1),ct(l.INFO,"recordRatingWidgetWithID, Reporting Rating Widget: ",i),ze(i)}else ct(l.ERROR,"recordRatingWidgetWithID, Rating Widget must contain rating property");else ct(l.ERROR,"recordRatingWidgetWithID, Rating Widget must contain widget_id property")},this.reportFeedbackWidgetManually=function(e,t,i){if(this.check_consent(s.FEEDBACK))if(e&&t)if(e._id)if(ke)ct(l.ERROR,"reportFeedbackWidgetManually, Feedback Widgets can not be reported in offline mode");else{ct(l.INFO,"reportFeedbackWidgetManually, Providing information about user with, provided result of the widget with  ID: [ "+e._id+" ] and type: ["+e.type+"]");var n,r=[],a=e.type;if("nps"===a){if(i){if(!i.rating)return void ct(l.ERROR,"reportFeedbackWidgetManually, Widget must contain rating property");i.rating=Math.round(i.rating),i.rating>10?(ct(l.WARNING,"reportFeedbackWidgetManually, You have entered a rating higher than 10. Changing it back to 10 now."),i.rating=10):i.rating<0&&(ct(l.WARNING,"reportFeedbackWidgetManually, You have entered a rating lower than 0. Changing it back to 0 now."),i.rating=0),r=["rating","comment"]}n=c.NPS}else if("survey"===a){if(i){if(Object.keys(i).length<1)return void ct(l.ERROR,"reportFeedbackWidgetManually, Widget should have answers to be reported");r=Object.keys(i)}n=c.SURVEY}else{if("rating"!==a)return void ct(l.ERROR,"reportFeedbackWidgetManually, Widget has an unacceptable type");if(i){if(!i.rating)return void ct(l.ERROR,"reportFeedbackWidgetManually, Widget must contain rating property");i.rating=Math.round(i.rating),i.rating>5?(ct(l.WARNING,"reportFeedbackWidgetManually, You have entered a rating higher than 5. Changing it back to 5 now."),i.rating=5):i.rating<1&&(ct(l.WARNING,"reportFeedbackWidgetManually, You have entered a rating lower than 1. Changing it back to 1 now."),i.rating=1),r=["rating","comment","email","contactMe"]}n=c.STAR_RATING}var o={key:n,count:1,segmentation:{widget_id:e._id,platform:this.platform,app_version:this.metrics._app_version||this.app_version}};null===i?o.segmentation.closed=1:o.segmentation=D(o.segmentation,i,r),ct(l.INFO,"reportFeedbackWidgetManually, Reporting "+a+": ",o),ze(o)}else ct(l.ERROR,"reportFeedbackWidgetManually, Feedback Widgets must contain _id property");else ct(l.ERROR,"reportFeedbackWidgetManually, Widget data and/or Widget object not provided. Aborting.")},this.show_feedback_popup=function(e){v?(ct(l.WARNING,"show_feedback_popup, Deprecated function call! Use 'presentRatingWidgetWithID' in place of this call. Call will be redirected now!"),this.presentRatingWidgetWithID(e)):ct(l.WARNING,"show_feedback_popup, window object is not available. Not showing feedback popup.")},this.presentRatingWidgetWithID=function(e){v?(ct(l.INFO,"presentRatingWidgetWithID, Showing rating widget popup for the widget with ID: [ "+e+" ]"),this.check_consent(s.STAR_RATING)&&(ke?ct(l.ERROR,"presentRatingWidgetWithID, Cannot show ratingWidget popup in offline mode"):dt("presentRatingWidgetWithID,",this.url+"/o/feedback/widget",{widget_id:e,av:a.app_version},(function(e,t,i){if(!e)try{Je(JSON.parse(i),!1)}catch(e){ct(l.ERROR,"presentRatingWidgetWithID, JSON parse failed: "+e)}}),!0))):ct(l.WARNING,"presentRatingWidgetWithID, window object is not available. Not showing rating widget popup.")},this.initialize_feedback_popups=function(e){v?(ct(l.WARNING,"initialize_feedback_popups, Deprecated function call! Use 'initializeRatingWidgets' in place of this call. Call will be redirected now!"),this.initializeRatingWidgets(e)):ct(l.WARNING,"initialize_feedback_popups, window object is not available. Not initializing feedback popups.")},this.initializeRatingWidgets=function(e){if(v){if(ct(l.INFO,"initializeRatingWidgets, Initializing rating widget with provided widget IDs:[ "+e+"]"),this.check_consent(s.STAR_RATING)){e||(e=kt("cly_fb_widgets"));for(var t=document.getElementsByClassName("countly-feedback-sticker");t.length>0;)t[0].remove();dt("initializeRatingWidgets,",this.url+"/o/feedback/multiple-widgets-by-id",{widgets:JSON.stringify(e),av:a.app_version},(function(e,t,i){if(!e)try{for(var n=JSON.parse(i),r=0;r<n.length;r++)if("true"===n[r].is_active&&n[r].target_devices[U()])if("string"==typeof n[r].hide_sticker&&(n[r].hide_sticker="true"===n[r].hide_sticker),"all"!==n[r].target_page||n[r].hide_sticker)for(var a=n[r].target_pages,o=0;o<a.length;o++){var s=a[o].substr(0,a[o].length-1)===window.location.pathname.substr(0,a[o].length-1),c=a[o]===window.location.pathname;(a[o].includes("*")&&s||c)&&!n[r].hide_sticker&&Je(n[r],!0)}else Je(n[r],!0)}catch(e){ct(l.ERROR,"initializeRatingWidgets, JSON parse error: "+e)}}),!0)}}else ct(l.WARNING,"initializeRatingWidgets, window object is not available. Not initializing rating widgets.")},this.enable_feedback=function(e){v?(ct(l.WARNING,"enable_feedback, Deprecated function call! Use 'enableRatingWidgets' in place of this call. Call will be redirected now!"),this.enableRatingWidgets(e)):ct(l.WARNING,"enable_feedback, window object is not available. Not enabling feedback.")},this.enableRatingWidgets=function(e){if(v){if(ct(l.INFO,"enableRatingWidgets, Enabling rating widget with params:",e),this.check_consent(s.STAR_RATING))if(ke)ct(l.ERROR,"enableRatingWidgets, Cannot enable rating widgets in offline mode");else{Rt("cly_fb_widgets",e.popups||e.widgets),Y(this.url+"/star-rating/stylesheets/countly-feedback-web.css");var t=e.popups||e.widgets;t.length>0?(document.body.insertAdjacentHTML("beforeend",'<div id="cfbg"></div>'),this.initializeRatingWidgets(t)):ct(l.ERROR,"enableRatingWidgets, You should provide at least one widget id as param. Read documentation for more detail. https://resources.count.ly/plugins/feedback")}}else ct(l.WARNING,"enableRatingWidgets, window object is not available. Not enabling rating widgets.")},this.get_available_feedback_widgets=function(e){ct(l.INFO,"get_available_feedback_widgets, Getting the feedback list, callback function is provided:["+!!e+"]"),this.check_consent(s.FEEDBACK)?ke?ct(l.ERROR,"get_available_feedback_widgets, Cannot enable feedback widgets in offline mode."):dt("get_available_feedback_widgets,",this.url+S,{method:s.FEEDBACK,device_id:this.device_id,app_key:this.app_key,av:a.app_version},(function(t,i,n){if(t)e&&e(null,t);else try{var r=JSON.parse(n).result||[];e&&e(r,null)}catch(t){ct(l.ERROR,"get_available_feedback_widgets, Error while parsing feedback widgets list: "+t),e&&e(null,t)}}),!1):e&&e(null,new Error("Consent for feedback not provided."))},this.getFeedbackWidgetData=function(e,t){if(e.type)if(ct(l.INFO,"getFeedbackWidgetData, Retrieving data for: ["+JSON.stringify(e)+"], callback function is provided:["+!!t+"]"),this.check_consent(s.FEEDBACK))if(ke)ct(l.ERROR,"getFeedbackWidgetData, Cannot enable feedback widgets in offline mode.");else{var i=this.url,n={widget_id:e._id,shown:1,sdk_version:Pe,sdk_name:Ge,platform:this.platform,app_version:this.app_version};if("nps"===e.type)i+="/o/surveys/nps/widget";else if("survey"===e.type)i+="/o/surveys/survey/widget";else{if("rating"!==e.type)return void ct(l.ERROR,"getFeedbackWidgetData, Unknown type info: ["+e.type+"]");i+="/o/surveys/rating/widget"}dt("getFeedbackWidgetData,",i,n,r,!0)}else t&&t(null,new Error("Consent for feedback not provided."));else ct(l.ERROR,"getFeedbackWidgetData, Expected the provided widget object to have a type but got: ["+JSON.stringify(e)+"], aborting.");function r(e,i,n){if(e)t&&t(null,e);else try{var r=JSON.parse(n);t&&t(r,null)}catch(e){ct(l.ERROR,"getFeedbackWidgetData, Error while parsing feedback widgets list: "+e),t&&t(null,e)}}},this.present_feedback_widget=function(e,i,n,r){if(v){if(ct(l.INFO,"present_feedback_widget, Presenting the feedback widget by appending to the element with ID: [ "+i+" ] and className: [ "+n+" ]"),this.check_consent(s.FEEDBACK))if(e&&"object"===t(e)&&!Array.isArray(e)){ct(l.INFO,"present_feedback_widget, Adding segmentation to feedback widgets:["+JSON.stringify(r)+"]"),r&&"object"===t(r)&&0!==Object.keys(r).length||(ct(l.DEBUG,"present_feedback_widget, Segmentation is not an object or empty"),r=null);try{var a=this.url;if("nps"===e.type)ct(l.DEBUG,"present_feedback_widget, Widget type: nps."),a+="/feedback/nps";else if("survey"===e.type)ct(l.DEBUG,"present_feedback_widget, Widget type: survey."),a+="/feedback/survey";else{if("rating"!==e.type)return void ct(l.ERROR,"present_feedback_widget, Feedback widget only accepts nps, rating and survey types.");ct(l.DEBUG,"present_feedback_widget, Widget type: rating."),a+="/feedback/rating"}var o,c=window.origin||window.location.origin;if("rating"===e.type?(ct(l.DEBUG,"present_feedback_widget, Loading css for rating widget."),o="ratings",Y(this.url+"/star-rating/stylesheets/countly-feedback-web.css")):(ct(l.DEBUG,"present_feedback_widget, Loading css for survey or nps."),Y(this.url+"/surveys/stylesheets/countly-surveys.css"),o="surveys"),a+="?widget_id="+e._id,a+="&app_key="+this.app_key,a+="&device_id="+this.device_id,a+="&sdk_name="+Ge,a+="&platform="+this.platform,a+="&app_version="+this.app_version,a+="&sdk_version="+Pe,r){var d={};d.sg=r,a+="&custom="+JSON.stringify(d)}a+="&origin="+c,a+="&widget_v=web";var u=document.createElement("iframe");u.src=a,u.name="countly-"+o+"-iframe",u.id="countly-"+o+"-iframe";var f=!1;u.onload=function(){f&&(document.getElementById("countly-"+o+"-wrapper-"+e._id).style.display="none",document.getElementById("csbg").style.display="none"),f=!0,ct(l.DEBUG,"present_feedback_widget, Loaded iframe.")};for(var p=document.getElementById("csbg");p;)p.remove(),p=document.getElementById("csbg"),ct(l.DEBUG,"present_feedback_widget, Removing past overlay.");for(var g=document.getElementsByClassName("countly-"+o+"-wrapper"),h=0;h<g.length;h++)g[h].remove(),ct(l.DEBUG,"present_feedback_widget, Removed a wrapper.");(g=document.createElement("div")).className="countly-"+o+"-wrapper",g.id="countly-"+o+"-wrapper-"+e._id,"survey"===e.type&&(g.className=g.className+" "+e.appearance.position);var _=document.body,m=!1;if(i&&(document.getElementById(i)?(_=document.getElementById(i),m=!0):ct(l.ERROR,"present_feedback_widget, Provided ID not found.")),m||n&&(document.getElementsByClassName(n)[0]?_=document.getElementsByClassName(n)[0]:ct(l.ERROR,"present_feedback_widget, Provided class not found.")),_.insertAdjacentHTML("beforeend",'<div id="csbg"></div>'),_.appendChild(g),"rating"===e.type){var y=document.createElement("div");y.className="countly-ratings-overlay",y.id="countly-ratings-overlay-"+e._id,g.appendChild(y),ct(l.DEBUG,"present_feedback_widget, appended the rating overlay to wrapper"),G(document.getElementById("countly-ratings-overlay-"+e._id),"click",(function(){document.getElementById("countly-ratings-wrapper-"+e._id).style.display="none"}))}if(g.appendChild(u),ct(l.DEBUG,"present_feedback_widget, Appended the iframe"),G(window,"message",(function(t){var i={};try{i=JSON.parse(t.data),ct(l.DEBUG,"present_feedback_widget, Parsed response message "+i)}catch(e){ct(l.ERROR,"present_feedback_widget, Error while parsing message body "+e)}i.close?(document.getElementById("countly-"+o+"-wrapper-"+e._id).style.display="none",document.getElementById("csbg").style.display="none"):ct(l.DEBUG,"present_feedback_widget, Closing signal not sent yet")})),"survey"===e.type){var b=!1;switch(e.showPolicy){case"afterPageLoad":"complete"===document.readyState?b||(b=!0,E(e)):G(document,"readystatechange",(function(t){"complete"===t.target.readyState&&(b||(b=!0,E(e)))}));break;case"afterConstantDelay":setTimeout((function(){b||(b=!0,E(e))}),1e4);break;case"onAbandon":"complete"===document.readyState?G(document,"mouseleave",(function(){b||(b=!0,E(e))})):G(document,"readystatechange",(function(t){"complete"===t.target.readyState&&G(document,"mouseleave",(function(){b||(b=!0,E(e))}))}));break;case"onScrollHalfwayDown":G(window,"scroll",(function(){b||Math.max(window.scrollY,document.body.scrollTop,document.documentElement.scrollTop)>=V()/2&&(b=!0,E(e))}));break;default:b||(b=!0,E(e))}}else if("nps"===e.type)document.getElementById("countly-"+o+"-wrapper-"+e._id).style.display="block",document.getElementById("csbg").style.display="block";else if("rating"===e.type){var w=!1;"complete"===document.readyState?w||(w=!0,k(e)):G(document,"readystatechange",(function(t){"complete"===t.target.readyState&&(w||(w=!0,k(e)))}))}}catch(e){ct(l.ERROR,"present_feedback_widget, Something went wrong while presenting the widget: "+e)}}else ct(l.ERROR,"present_feedback_widget, Please provide at least one feedback widget object.")}else ct(l.WARNING,"present_feedback_widget, window object is not available. Not presenting feedback widget.");function E(e){document.getElementById("countly-surveys-wrapper-"+e._id).style.display="block",document.getElementById("csbg").style.display="block"}function k(e){if(!e.appearance.hideS){ct(l.DEBUG,"present_feedback_widget, handling the sticker as it was not set to hidden");var t=document.createElement("div");t.innerText=e.appearance.text,t.style.color=e.appearance.text_color.length<7?"#"+e.appearance.text_color:e.appearance.text_color,t.style.backgroundColor=e.appearance.bg_color.length<7?"#"+e.appearance.bg_color:e.appearance.bg_color,t.className="countly-feedback-sticker  "+e.appearance.position+"-"+e.appearance.size,t.id="countly-feedback-sticker-"+e._id,document.body.appendChild(t),G(document.getElementById("countly-feedback-sticker-"+e._id),"click",(function(){document.getElementById("countly-ratings-wrapper-"+e._id).style.display="flex",document.getElementById("csbg").style.display="block"}))}G(document.getElementById("countly-feedback-close-icon-"+e._id),"click",(function(){document.getElementById("countly-ratings-wrapper-"+e._id).style.display="none",document.getElementById("csbg").style.display="none"}))}},this.recordError=function(e,i,n){if(ct(l.INFO,"recordError, Recording error"),this.check_consent(s.CRASHES)&&e){n=n||oe;var r="";if("object"===t(e)?void 0!==e.stack?r=e.stack:(void 0!==e.name&&(r+=e.name+":"),void 0!==e.message&&(r+=e.message+"\n"),void 0!==e.fileName&&(r+="in "+e.fileName+"\n"),void 0!==e.lineNumber&&(r+="on "+e.lineNumber),void 0!==e.columnNumber&&(r+=":"+e.columnNumber)):r=e+"",r.length>a.maxStackTraceLineLength*a.maxStackTraceLinesPerThread){ct(l.DEBUG,"record_error, Error stack is too long will be truncated");var o=r.split("\n");o.length>a.maxStackTraceLinesPerThread&&(o=o.splice(0,a.maxStackTraceLinesPerThread));for(var c=0,d=o.length;c<d;c++)o[c].length>a.maxStackTraceLineLength&&(o[c]=o[c].substring(0,a.maxStackTraceLineLength));r=o.join("\n")}i=!!i;var u=ot(),f={_resolution:u._resolution,_error:r,_app_version:u._app_version,_run:R()-Oe,_not_os_specific:!0,_javascript:!0},p=navigator.battery||navigator.webkitBattery||navigator.mozBattery||navigator.msBattery;p&&(f._bat=Math.floor(100*p.level)),void 0!==navigator.onLine&&(f._online=!!navigator.onLine),v&&(f._background=!document.hasFocus()),ne.length>0&&(f._logs=ne.join("\n")),ne=[],f._nonfatal=i,f._view=this.getViewName(),void 0!==n&&(n=C(n,a.maxKeyLength,a.maxValueSize,a.maxSegmentationValues,"record_error",ct),f._custom=n);try{var g=document.createElement("canvas").getContext("experimental-webgl");f._opengl=g.getParameter(g.VERSION)}catch(e){ct(l.ERROR,"Could not get the experimental-webgl context: "+e)}var h={};h.crash=JSON.stringify(f),h.metrics=JSON.stringify({_ua:u._ua}),et(h)}},this.onStorageChange=function(e,t){switch(ct(l.DEBUG,"onStorageChange, Applying storage changes for key:",e),ct(l.DEBUG,"onStorageChange, Applying storage changes for value:",t),e){case"cly_queue":ee=a.deserialize(t||"[]");break;case"cly_event":te=a.deserialize(t||"[]");break;case"cly_remote_configs":ie=a.deserialize(t||"{}");break;case"cly_ignore":a.ignore_visitor=a.deserialize(t);break;case"cly_id":a.device_id=t;break;case"cly_id_type":xe=a.deserialize(t)}},this._internals={store:Rt,getDocWidth:j,getDocHeight:V,getViewportHeight:q,get_page_coord:z,get_event_target:P,add_event_listener:G,createNewObjectFromProperties:T,truncateObject:C,truncateSingleValue:L,stripTrailingSlash:A,prepareParams:x,sendXmlHttpRequest:lt,isResponseValid:ft,getInternalDeviceIdType:_t,getMsTimestamp:O,getTimestamp:R,isResponseValidBroad:pt,secureRandom:w,log:ct,checkIfLoggingIsOn:Q,getMetrics:ot,getUA:at,prepareRequest:Ze,generateUUID:E,sendEventsForced:Ke,isUUID:rt,isReferrerUsable:st,getId:nt,heartBeat:tt,toRequestQueue:et,reportViewDuration:Xe,loadJS:J,loadCSS:Y,getLastView:Qe,setToken:mt,getToken:vt,showLoader:X,hideLoader:$,setValueInStorage:Rt,getValueFromStorage:kt,removeValueFromStorage:St,add_cly_events:ze,processScrollView:ht,processScroll:gt,currentUserAgentString:F,currentUserAgentDataString:W,userAgentDeviceDetection:U,userAgentSearchBotDetection:M,getRequestQueue:bt,getEventQueue:yt,sendFetchRequest:ut,processAsyncQueue:it,makeNetworkRequest:dt,clearQueue:function(){ee=[],Rt("cly_queue",[]),te=[],Rt("cly_event",[])},getLocalQueues:function(){return{eventQ:te,requestQ:ee}}};var It={};function Nt(){a.hcErrorCount++}function xt(){a.hcWarningCount++}function At(){a.hcErrorCount=0,a.hcWarningCount=0,a.hcStatusCode=-1,a.hcErrorMessage=""}function Tt(e,t){a.hcStatusCode=e,a.hcErrorMessage=t,Rt(g.statusCode,a.hcStatusCode),Rt(g.errorMessage,a.hcErrorMessage)}function Dt(){It.resetCounters(),Rt(g.errorCount,a.hcErrorCount),Rt(g.warningCount,a.hcWarningCount),Rt(g.statusCode,a.hcStatusCode),Rt(g.errorMessage,a.hcErrorMessage)}function Ct(){var e=L(a.hcErrorMessage,1e3,"healthCheck",ct),t={el:a.hcErrorCount,wl:a.hcWarningCount,sc:a.hcStatusCode,em:JSON.stringify(e)},i={hc:JSON.stringify(t),metrics:JSON.stringify({_app_version:a.app_version})};Ze(i),dt("[healthCheck]",a.url+k,i,(function(e){e||It.resetAndSaveCounters()}),!0)}It.sendInstantHCRequest=Ct,It.resetAndSaveCounters=Dt,It.incrementErrorCount=Nt,It.incrementWarningCount=xt,It.resetCounters=At,It.saveRequestCounters=Tt,this.initialize()})),ee=!0;function te(e){var t=document.createElement("script"),i=document.createElement("script");t.async=!0,i.async=!0,t.src=y.customSourceBoomerang||p.BOOMERANG_SRC,i.src=y.customSourceCountlyBoomerang||p.CLY_BOOMERANG_SRC,document.getElementsByTagName("head")[0].appendChild(t),document.getElementsByTagName("head")[0].appendChild(i);var n=!1,r=!1;t.onload=function(){n=!0},i.onload=function(){r=!0};var a=0,o=50,s=1500,c=setInterval((function(){if(a+=o,n&&r||a>=s){if(y.debug){var t="BoomerangJS loaded:["+n+"], countly_boomerang loaded:["+r+"].";n&&r?(t="[DEBUG] "+t,console.log(t)):(t="[WARNING] "+t+" Initializing without APM.",console.warn(t))}y.init(e),clearInterval(c)}}),o)}y.features=[s.APM,s.ATTRIBUTION,s.CLICKS,s.CRASHES,s.EVENTS,s.FEEDBACK,s.FORMS,s.LOCATION,s.REMOTE_CONFIG,s.SCROLLS,s.SESSIONS,s.STAR_RATING,s.USERS,s.VIEWS],y.q=y.q||[],y.onload=y.onload||[],y.CountlyClass=Z,y.init=function(e){if(e=e||{},y.loadAPMScriptsAsync&&ee)return ee=!1,void te(e);var t=e.app_key||y.app_key;if(!y.i||!y.i[t]){var i=new Z(e);if(!y.i)for(var n in y.i={},i)y[n]=i[n];y.i[t]=i}return y.i[t]},y.serialize=function(e){return"object"===t(e)&&(e=JSON.stringify(e)),e},y.deserialize=function(e){if(""===e)return e;try{e=JSON.parse(e)}catch(t){Q()&&console.warn("[WARNING] [Countly] deserialize, Could not parse the file:["+e+"], error: "+t)}return e},y.getViewName=function(){return v?window.location.pathname:"web_worker"},y.getViewUrl=function(){return v?window.location.pathname:"web_worker"},y.getSearchQuery=function(){if(v)return window.location.search},y.DeviceIdType={DEVELOPER_SUPPLIED:u.DEVELOPER_SUPPLIED,SDK_GENERATED:u.SDK_GENERATED,TEMPORARY_ID:u.TEMPORARY_ID},v&&window.addEventListener("storage",(function(e){var t=(e.key+"").split("/"),i=t.pop(),n=t.pop();y.i&&y.i[n]&&y.i[n].onStorageChange(i,e.newValue)})),e.default=y,Object.defineProperty(e,"__esModule",{value:!0})}(t)},"2ebeb3f047544c6386fa":(e,t,i)=>{"use strict";function n(e){var t,i,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(i=n(e[t]))&&(r&&(r+=" "),r+=i)}else for(i in e)e[i]&&(r&&(r+=" "),r+=i);return r}i.d(t,{Z:()=>r});const r=function(){for(var e,t,i=0,r="",a=arguments.length;i<a;i++)(e=arguments[i])&&(t=n(e))&&(r&&(r+=" "),r+=t);return r}}}]);